"use strict";(self.webpackChunkredback_documentation=self.webpackChunkredback_documentation||[]).push([[7496],{89449:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Configuration","title":"LDAP Configuration","description":"Last updated by \'03/12/2024\'","source":"@site/docs/cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Configuration.md","sourceDirName":"cybersecurity/Infrastrcture Team/Ubuntu Server","slug":"/cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Configuration","permalink":"/redback-documentation/docs/cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/Redback-Operations/redback-documentation/blob/main/docs/cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"LDAP Ubuntu Server Handover","permalink":"/redback-documentation/docs/cybersecurity/Infrastrcture Team/Ubuntu Server/LDAP Ubuntu Server Handover"},"next":{"title":"Optional Services","permalink":"/redback-documentation/docs/cybersecurity/Infrastrcture Team/Ubuntu Server/Optional Services"}}');var t=r(74848),d=r(28453);const o={sidebar_position:2},i="Ubuntu Server LDAP Configuration",a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"LDAP Setup",id:"ldap-setup",level:2},{value:"LDAP Directory Structure and Entries",id:"ldap-directory-structure-and-entries",level:2}];function l(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Last updated by:"})," T_Apperley, ",(0,t.jsx)(n.strong,{children:"Last updated on:"})," '03/12/2024'"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Last updated by:"})," T_Apperley, ",(0,t.jsx)(n.strong,{children:"Last updated on:"})," '03/12/2024'"]}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ubuntu-server-ldap-configuration",children:"Ubuntu Server LDAP Configuration"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Document Creation:"})," 16 September, 2024. ",(0,t.jsx)(n.strong,{children:"Last Edited:"})," 18 September, 2024. ",(0,t.jsx)(n.strong,{children:"Authors:"})," Drew Baker.\r\n",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:"Effective Date:"})," 18 September 2024. ",(0,t.jsx)(n.strong,{children:"Expiry Date:"})," 18 September 2025."]})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"This document provides detailed instructions for configuring an LDAP directory on an Ubuntu server. It is designed to help users understand the basics of LDAP, its practical uses, and how to contribute to the company\u2019s ongoing development efforts. The aim is to give users a working understanding of LDAP configurations so they can expand upon the system and apply it to their projects or initiatives."}),"\n",(0,t.jsx)(n.h2,{id:"ldap-setup",children:"LDAP Setup"}),"\n",(0,t.jsxs)(n.p,{children:["To set up the ",(0,t.jsx)(n.code,{children:"RedOps Ubuntu Server"})," with LDAP, it's recommended to deploy this virtual machine (VM) on a separate system for convenience. For example, in my deployment, I used a Windows 10 Pro host that is scheduled for retirement, with an added registry key to auto-launch the VM at startup. If you`d like to replicate this setup, follow these steps:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download the ",(0,t.jsx)(n.code,{children:"Ubuntu Server Workspace"})," OVA file from the ",(0,t.jsx)(n.code,{children:"Cyber Security Team > 2024 Trimester 2"})," folder on the company SharePoint."]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["The system credintials should have modified from the defualt ",(0,t.jsx)(n.strong,{children:"USER:"})," ",(0,t.jsx)(n.code,{children:"rboadmin"})," ",(0,t.jsx)(n.strong,{children:"PASS:"})," ",(0,t.jsx)(n.code,{children:"admin"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"important",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note the LDAP login credentials are:"}),"\r\n",(0,t.jsx)(n.strong,{children:"USER:"})," ",(0,t.jsx)(n.code,{children:"rbosys"}),"\r\n",(0,t.jsx)(n.strong,{children:"PASS:"})," ",(0,t.jsx)(n.code,{children:"admin"})]})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"After importing the appliance and ensuring your network adapter settings are correct, boot the machine, sign in, and run the following commands to update the system:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt upgrade\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Install LDAP-related packages:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install slapd ldap-utils\r\nsudo dpkg-reconfigure slapd\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["Manage the ",(0,t.jsx)(n.code,{children:"slapd"})," service using the following commands:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl start slapd\r\nsudo systemctl status slapd\r\nsudo systemctl stop slapd\r\nsudo systemctl restart slapd\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsxs)(n.li,{children:["Change the default password from ",(0,t.jsx)(n.code,{children:"admin"})," and share it, along with the server\u2019s IP address and chosen external port (if port forwarding is enabled), with your team."]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"To check your IP, run:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl ifconfig.me\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsx)(n.li,{children:"Perform a basic LDAP search to verify the setup:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ldapsearch -x -LLL -H ldap:/// -b dc=redbackops,dc=org,dc=au\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"or"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ldapsearch -Q -LLL -Y EXTERNAL -H ldap:///\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ldap-directory-structure-and-entries",children:"LDAP Directory Structure and Entries"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"/etc/ldap/ldap.conf"})," has been modified to allow easier use of the LDAP utilities,\r\nTo add some initial LDAP entries, create a base structure for People and Groups as follows:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create the base structure in an LDIF file (e.g., ",(0,t.jsx)(n.code,{children:"base.ldif"}),"):"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dn: ou=People,dc=redbackops,dc=org,dc=au\r\nobjectClass: organizationalUnit\r\nou: People\r\n\r\ndn: ou=Groups,dc=redbackops,dc=org,dc=au\r\nobjectClass: organizationalUnit\r\nou: Groups\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Add these entries to the LDAP directory:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo ldapadd -x -D cn=admin,dc=redbackops,dc=org,dc=au -W -f base.ldif\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Add a user (",(0,t.jsx)(n.code,{children:"jdoe"}),") and a group (",(0,t.jsx)(n.code,{children:"developers"}),") in an LDIF file (e.g., ",(0,t.jsx)(n.code,{children:"add_entries.ldif"}),"):"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dn: uid=jdoe,ou=People,,dc=redbackops,dc=org,dc=au\r\nobjectClass: inetOrgPerson\r\nuid: jdoe\r\nsn: Doe\r\ngivenName: John\r\ncn: John Doe\r\ndisplayName: John Doe\r\nuserPassword: secret\r\nmail: jdoe@example.com\r\n\r\ndn: cn=developers,ou=Groups,dc=redbackops,dc=org,dc=au\r\nobjectClass: posixGroup\r\ncn: developers\r\ngidNumber: 5000\r\nmemberUid: jdoe\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Add the entries to the LDAP directory:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo ldapadd -x -D cn=admin,dc=redbackops,dc=org,dc=au -W -f add_entries.ldif\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsxs)(n.li,{children:["Verify that the user ",(0,t.jsx)(n.code,{children:"jdoe"})," was added successfully:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ldapsearch -x -LLL -b dc=redbackops,dc=org,dc=au `uid=jdoe`\n"})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var s=r(96540);const t={},d=s.createContext(t);function o(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);