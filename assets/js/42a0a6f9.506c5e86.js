"use strict";(self.webpackChunkredback_documentation=self.webpackChunkredback_documentation||[]).push([[6392],{49075:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"project-3/research/strava-bulk-export-data-description","title":"strava-bulk-export-data-description","description":"Last updated by \'12/04/2024\'","source":"@site/docs/project-3/research/strava-bulk-export-data-description.md","sourceDirName":"project-3/research","slug":"/project-3/research/strava-bulk-export-data-description","permalink":"/redback-documentation/docs/project-3/research/strava-bulk-export-data-description","draft":false,"unlisted":false,"editUrl":"https://github.com/Redback-Operations/redback-documentation/blob/main/docs/project-3/research/strava-bulk-export-data-description.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"sports-performance-overview","permalink":"/redback-documentation/docs/project-3/research/sports-performance-overview"},"next":{"title":"web-scraping-in-python","permalink":"/redback-documentation/docs/project-3/research/web-scraping-in-python"}}');var a=n(74848),r=n(28453);const s={},o="Strava Bulk Export Data Description",d={},l=[{value:"Top level directory",id:"top-level-directory",level:2},{value:"Sub-directories",id:"sub-directories",level:2},{value:"Activity file fields",id:"activity-file-fields",level:2},{value:"Data features and characteristics",id:"data-features-and-characteristics",level:2},{value:"Data manipulations",id:"data-manipulations",level:2},{value:"1. Export the data from Strava",id:"1-export-the-data-from-strava",level:2},{value:"2. Clean the data",id:"2-clean-the-data",level:2},{value:"3. Load the data into the GitHub repository",id:"3-load-the-data-into-the-github-repository",level:2}];function c(e){const t={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Last updated by:"})," brendankntb, ",(0,a.jsx)(t.strong,{children:"Last updated on:"})," '12/04/2024'"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Last updated by:"})," brendankntb, ",(0,a.jsx)(t.strong,{children:"Last updated on:"})," '12/04/2024'"]}),"\n",(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"strava-bulk-export-data-description",children:"Strava Bulk Export Data Description"})}),"\n",(0,a.jsx)(t.p,{children:"This document explains the origin of the Strava data used in the Cycling analysis sub-project which was obtained through a bulk export of a team members workout data. The data contained details for multiple sports but the cycling data can be separated for analysis as part of this project."}),"\n",(0,a.jsx)(t.p,{children:"This document describes the cycling data available with the focus on how the data can be used for building predictive ML models."}),"\n",(0,a.jsx)(t.h2,{id:"top-level-directory",children:"Top level directory"}),"\n",(0,a.jsx)(t.p,{children:"The top level directory contains many .csv files - most of which are not relevant or only slightly relevant for our analyses. There is often around 40+ such files and only a small number contain information that we will use:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"activities.csv"}),": A summary tab;e of the workouts included in the doeanload. This contains many summary fields such as duration, distance, average and maximum speed, average and maximum power, and average and maximum cadence. It also includes a link to a .fit, .gpx to .tcx file for the workout that contains the specific data recorded for that individual workout."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note:"})," The average speed is on recorded if there is a device for the workout measuring speed. It is not calculated from elapsed moving time and duration if there has been no speed recording device."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"bikes.csv"}),": Details of bikes that the account holder has entered into their Strava account."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"comments.csv"}),": Comments that have been recorded by the user for any of the recorded workouts. This is free form text and the comments can be anything from a description of the workout to saying hello to a fellow Strava user."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"profile.csv"}),": Information about the account holder including name, email address, state, country, sex and weight."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Strava will provide estimates for some fields in the activities.csv file rather than actual measurements. This is true for average power and we want to exclude any entries that are not actual measurements for this field. The underlying .fit file will show actual measured values where they exist."}),"\n",(0,a.jsx)(t.h2,{id:"sub-directories",children:"Sub-directories"}),"\n",(0,a.jsx)(t.p,{children:"The download also creates four sub-directories:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"activities"}),": Contains the .fit, .gpx to .tcx files for each workout where they have been recorded."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"clubs"}),": Details of any Clubs the account holder has defined or joined."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"media"}),": Any photos or videos that the account holder has uploaded with their workouts."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"routes"}),": Any routes that the account holder has defined in Strava."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Of these sub-directories, the one that is used by our project is the ",(0,a.jsx)(t.strong,{children:"activities"})," directory."]}),"\n",(0,a.jsx)(t.h2,{id:"activity-file-fields",children:"Activity file fields"}),"\n",(0,a.jsx)(t.p,{children:"The fields included in the .fit files for rides with power data measured are:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"altitude"}),": Altitude above sea level (m)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"cadence"}),": Pedal cadence, indicating the rate at which a cyclist is pedaling in revolutions per minute (RPM)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"combined_pedal_smoothness"}),": A measure of how smoothly the cyclist is pedaling, indicating pedaling efficiency."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"distance"}),": The cumulative distance traveled during the cycling activity (m)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"enhanced_altitude"}),": An enhanced measure of altitude (m)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"enhanced_speed"}),": Speed calculated using GPS or sensor data, typically measured in kilometres per hour (km/h)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"gps_accuracy"}),": The accuracy level of the GPS signal (m)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"grade"}),": The incline or decline grade of the road, expressed as a percentage."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"heart_rate"}),": The cyclist's heart rate in beats per minute (BPM)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"left_right_balance"}),": The balance between the left and right pedal strokes."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"left_torque_effectiveness"}),": The efficiency of torque application during the left pedal stroke."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"position_lat"}),": The latitude coordinate from the GPS data."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"position_long"}),": The longitude coordinate from the GPS data."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"power"}),": The cyclist's power output in (W)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"right_torque_effectiveness"}),": The efficiency of torque application during the right pedal stroke."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"speed"}),": The cycling speed, typically measured (km/h)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"temperature"}),": The ambient temperature (Celsius)."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"timestamp"}),": The date and time for each recorded data point."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"data-features-and-characteristics",children:"Data features and characteristics"}),"\n",(0,a.jsx)(t.p,{children:"There are numerous unusual features of the dataset. The notable aspects are:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Average speed is only included in ",(0,a.jsx)(t.strong,{children:"activities.csv"})," when there is a speed measurement device and will not be calculated from distance and moving time."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Average power in the ",(0,a.jsx)(t.strong,{children:"activities.csv"})," may be calculated rather than measured and is not a reliable indicator of whether a power measurement device has been used for the activity. Instead, only Weighted Average Power."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"data-manipulations",children:"Data manipulations"}),"\n",(0,a.jsx)(t.p,{children:"The measurements for individual rides are provided in .fit.gz files. These files are compressed .fit files which is a binary file format. A Python program was created to read these files and write them out as CSVs for easier processing."}),"\n",(0,a.jsxs)(t.p,{children:["The python code and notebook related to this exploration is available at ",(0,a.jsx)(t.a,{href:"https://github.com/Redback-Operations/redback-fit-sports-performance/blob/main/Cycling%20Analysis/Strava%20explorer.ipynb",children:"Strava Data Exploration"}),"."]}),"\n",(0,a.jsx)(t.h1,{id:"importing-a-strava-workout-database",children:"Importing a Strava workout database"}),"\n",(0,a.jsx)(t.h2,{id:"1-export-the-data-from-strava",children:"1. Export the data from Strava"}),"\n",(0,a.jsx)(t.p,{children:"To import a Strava workout database, you will need to export the data from Strava. This can be done by following these steps:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Log in to your Strava account."}),"\n",(0,a.jsx)(t.li,{children:"Click on your profile picture in the top right corner of the screen."}),"\n",(0,a.jsx)(t.li,{children:"Select 'Settings' from the dropdown menu."}),"\n",(0,a.jsx)(t.li,{children:"Click on 'My Account' in the left-hand menu."}),"\n",(0,a.jsx)(t.li,{children:"Scroll down to the 'Download or Delete Your Account' section."}),"\n",(0,a.jsx)(t.li,{children:"Click on 'Get Started' under 'Download Your Data'."}),"\n",(0,a.jsx)(t.li,{children:"Select the data range you want to export and click 'Request Your Archive'."}),"\n",(0,a.jsx)(t.li,{children:"Wait for Strava to prepare your data and send you an email with a link to download it."}),"\n",(0,a.jsx)(t.li,{children:"Download the data and extract the files to a location on your computer."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"2-clean-the-data",children:"2. Clean the data"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.a,{href:"https://github.com/Redback-Operations/redback-fit-sports-performance/blob/main/Cycling%20Analysis/Strava%20explorer.ipynb",children:"Strava Data Exploration"})," notebook contains code to clean the data and export it to the csv format used by the prediction models."]}),"\n",(0,a.jsx)(t.p,{children:"To clean the data:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Set the 'source_path' variable in the cell marked as 2.1 to the location of the Strava data export."}),"\n",(0,a.jsx)(t.li,{children:"Set the 'athlete_id' variable to the value that you want to use to identify this athlete. The example uses 'TRI001' as the data is from a triathlete and it is the first triathlete included."}),"\n",(0,a.jsx)(t.li,{children:"Run the three cells under the 2.1 heading to clean up the data and filter the Ride, Run and Swim data that contains enough information for the models to use."}),"\n",(0,a.jsx)(t.li,{children:"Run the cell under the 2.2 heading to export the data to the csv format used by the prediction models."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"3-load-the-data-into-the-github-repository",children:"3. Load the data into the GitHub repository"}),"\n",(0,a.jsx)(t.p,{children:"Once you have cleaned the data, you can load it into the GitHub repository for use by the prediction models. This will involve checking in the 'extended_activities_athlete_id.csv' file that was created in the 2.2 cell and all the .csv.gz files for the individual session data."}),"\n",(0,a.jsx)(t.p,{children:"Create the pull request that includes these files."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var i=n(96540);const a={},r=i.createContext(a);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);