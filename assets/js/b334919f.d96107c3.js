"use strict";(self.webpackChunkredback_documentation=self.webpackChunkredback_documentation||[]).push([[9572],{39403:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"project-4/Crowd-Monitoring/MongoDB-Overview","title":"MongoDB-Overview","description":"Last updated by \'22/08/2024\'","source":"@site/docs/project-4/Crowd-Monitoring/MongoDB-Overview.md","sourceDirName":"project-4/Crowd-Monitoring","slug":"/project-4/Crowd-Monitoring/MongoDB-Overview","permalink":"/redback-documentation/docs/project-4/Crowd-Monitoring/MongoDB-Overview","draft":false,"unlisted":false,"editUrl":"https://github.com/Redback-Operations/redback-documentation/blob/main/docs/project-4/Crowd-Monitoring/MongoDB-Overview.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Crowd-Monitoring-Overview","permalink":"/redback-documentation/docs/project-4/Crowd-Monitoring/Crowd-Monitoring-Overview"},"next":{"title":"IOT Guided Documents","permalink":"/redback-documentation/docs/category/iot-guided-documents"}}');var r=o(74848),i=o(28453);const a={sidebar_position:2},s="MongoDB",d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Installation",id:"installation",level:2},{value:"Data Recording",id:"data-recording",level:2},{value:"Results",id:"results",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Last updated by:"})," Vincent Tran, ",(0,r.jsx)(n.strong,{children:"Last updated on:"})," '22/08/2024'"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Last updated by:"})," Vincent Tran, ",(0,r.jsx)(n.strong,{children:"Last updated on:"})," '22/08/2024'"]}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mongodb",children:"MongoDB"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"MongoDB, a NoSQL database management platform, is utilized in this project to store crowd monitoring data. Given the current focus on tracking crowds and analyzing movement trends, MongoDB is a suitable choice due to its schemaless and non-relational properties, which offer flexibility in handling diverse data types. However, as the project scales and becomes more complex with additional components, transitioning to a standard SQL database may be considered to accommodate the need for more structured data management."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"To establish a database on MongoDB, you can easily create the database and clusters by following the instructions provided on the MongoDB website. For cluster configuration, the team will use the free-tier option, which includes 512 MB of storage."}),"\n",(0,r.jsx)(n.p,{children:"When connecting to MongoDB, it's important to select the appropriate driver and version to ensure you receive the correct instructions, as shown in the image below."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MongoDB Setup",src:o(80444).A+"",width:"1552",height:"1890"})}),"\n",(0,r.jsx)(n.p,{children:"To install the MongoDB driver on your local machine, follow the command line instructions provided below."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'python -m pip install "pymongo[srv]"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"data-recording",children:"Data Recording"}),"\n",(0,r.jsx)(n.p,{children:"The below block has the function of connecting to the MongoDB driver.\r\nIt would directly access to the CrowdTracking database and Crowd collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from pymongo import MongoClient\r\n\r\nclient = MongoClient(\'mongo+srv:// \')\r\ndb = client["CrowTracking"]\r\ncollection = db["Crowd"]\n'})}),"\n",(0,r.jsx)(n.p,{children:"In regard to real-time crowd monitoring there would be two main approachs."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'now = datetime.now()\r\ndata = {            \r\n    "frame_id": frame_id,\r\n    "timestamp": now.strftime("%d/%m/%Y %H:%M:%S"),\r\n    "total_persons": len(boxes)\r\n}\r\ncollection.insert_one(data)\n'})}),"\n",(0,r.jsx)(n.p,{children:"This code would record the captured data based on every round of loop. The advantage of this approach is that the data would be imported into MongoDB in every frame ID. However, as the recursion os executed hastely, YOLO could process mutiple of frames in a second leading to the burdern of storage."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'if current_time - last_update_time < update_interval:\r\n    now = datetime.now()\r\n    data = {\r\n        "frame_id": frame_id,\r\n        "timestamp": now.strftime("%d/%m/%Y %H:%M:%S"),\r\n        "total_persons": len(boxes)\r\n    }\r\n    collection.insert_one(data)\r\n    last_update_time = current_time\n'})}),"\n",(0,r.jsx)(n.p,{children:"With the above code, by setting up a variable for interval time, we can easily adjust this variable to update the recorded data on MongoDB in every second, minute or hour."}),"\n",(0,r.jsx)(n.h2,{id:"results",children:"Results"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MongoDB Live Data",src:o(99619).A+"",width:"1646",height:"2014"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},80444:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/MongoDBConnect-1c9665cb54bf187e136d739ff2cc5ef2.png"},99619:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/live_data-a06c8f39cbf7e099743bd82e60a7716d.png"},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>s});var t=o(96540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);