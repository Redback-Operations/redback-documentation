"use strict";(self.webpackChunkredback_documentation=self.webpackChunkredback_documentation||[]).push([[9526],{17445:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"cybersecurity/Blue Team/pihole-setup","title":"pihole-setup","description":"Last updated by \'17/12/2024\'","source":"@site/docs/cybersecurity/Blue Team/pihole-setup.md","sourceDirName":"cybersecurity/Blue Team","slug":"/cybersecurity/Blue Team/pihole-setup","permalink":"/redback-documentation/docs/cybersecurity/Blue Team/pihole-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/Redback-Operations/redback-documentation/blob/main/docs/cybersecurity/Blue Team/pihole-setup.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"elf-stack-geoip","permalink":"/redback-documentation/docs/cybersecurity/Blue Team/elf-stack-geoip"},"next":{"title":"pi-research","permalink":"/redback-documentation/docs/cybersecurity/Blue Team/pi-research"}}');var n=s(74848),a=s(28453);const r={sidebar_position:4},l="setup guide for pi hole in Debian 12",d={},o=[{value:"sudo apt update &amp;&amp; sudo apt upgrade -y",id:"sudo-apt-update--sudo-apt-upgrade--y",level:3},{value:"sudo apt install curl gnupg -y",id:"sudo-apt-install-curl-gnupg--y",level:3},{value:"curl -sSL https://install.pi-hole.net | bash",id:"curl--ssl-httpsinstallpi-holenet--bash",level:3},{value:"Configuration:",id:"configuration",level:2},{value:"Blacklists:",id:"blacklists",level:2},{value:"Whitelists:",id:"whitelists",level:2},{value:"how to set these blacklist and whitelists:",id:"how-to-set-these-blacklist-and-whitelists",level:2},{value:"curl -o whitelist.txt https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt",id:"curl--o-whitelisttxt-httpsrawgithubusercontentcomanudeepndwhitelistmasterdomainswhitelisttxt",level:3},{value:"Adding blacklists:",id:"adding-blacklists",level:3}];function c(e){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",strong:"strong",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Last updated by:"})," buvan008, ",(0,n.jsx)(t.strong,{children:"Last updated on:"})," '17/12/2024'"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Last updated by:"})," buvan008, ",(0,n.jsx)(t.strong,{children:"Last updated on:"})," '17/12/2024'"]}),"\n",(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"setup-guide-for-pi-hole-in-debian-12",children:"setup guide for pi hole in Debian 12"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1:"}),"\r\nDownload Debian 12 and install it in your vm. Don\u2019t forget to install the guest additions as well."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2:"}),"\r\nAfter installing Debian in your vm, log into it. As the second step we need to set a static ip for the pihole. I\u2019ll put down the steps for it down here:"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"1.\tIdentify Network Interface"}),"\r\n\u2022\tUse ip addr show to find the network interface name\r\n\u2022\tNote current IP address, gateway, and DNS server"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"2.\tCheck NetworkManager Configuration"}),"\r\n\u2022\tOpen /etc/NetworkManager/NetworkManager.conf\r\n\u2022\tEnsure the [ifupdown] section is set to managed=true\r\n\u2022\tThis allows NetworkManager to manage network interfaces"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"3.\tModify Network Connection"}),"\r\n\u2022\tUse nmcli connection modify command\r\n\u2022\tSet IP method to manual\r\n\u2022\tSpecify:\r\n\u2022\tStatic IP address:  (ex: 192.168.x.x)\r\n\u2022\tSubnet mask:  (ex: 255.255.255):\r\n\u2022\tGateway\r\n\u2022\tDNS servers: (ex: 192.168.1.1)"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"4.\tRestart NetworkManager Service:"}),"\r\nsudo systemctl restart NetworkManager\r\n\u2022\tApplies the new network configuration\r\n\u2022\tEnsures changes take effect"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"5.\tVerify Network Configuration"}),"\r\n\u2022\tUse ip addr show to check IP address\r\n\u2022\tUse ip route to confirm gateway\r\n\u2022\tTest network connectivity with ping"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Key Considerations:"}),"\r\n\u2022\tEnsure you have the correct IP details before configuring\r\n\u2022\tDouble-check gateway and DNS server addresses\r\n\u2022\tHave a backup connection method in case of configuration errors"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3:"}),"\r\nFirst open the terminal and run the command:"]}),"\n",(0,n.jsx)(t.h3,{id:"sudo-apt-update--sudo-apt-upgrade--y",children:"sudo apt update && sudo apt upgrade -y"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"QRPS",src:s(67966).A+"",width:"1920",height:"947"})}),"\n",(0,n.jsx)(t.p,{children:"this will update and upgrade the system."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4:"}),"\r\nInstall required dependencies. For this run the command:"]}),"\n",(0,n.jsx)(t.h3,{id:"sudo-apt-install-curl-gnupg--y",children:"sudo apt install curl gnupg -y"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"QRPS",src:s(18965).A+"",width:"1920",height:"947"})}),"\n",(0,n.jsx)(t.p,{children:"This ensures you can fetch the Pi-hole installation script securely"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 5:"}),"\r\nDownload and run the pi-hole installation script. For this run the command:"]}),"\n",(0,n.jsxs)(t.h3,{id:"curl--ssl-httpsinstallpi-holenet--bash",children:["curl -sSL ",(0,n.jsx)(t.a,{href:"https://install.pi-hole.net",children:"https://install.pi-hole.net"})," | bash"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"QRPS",src:s(49868).A+"",width:"1920",height:"947"})}),"\n",(0,n.jsxs)(t.p,{children:["Wait for the installation to be completed and then you\u2019ll see this:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(80035).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 6:"}),"\r\nAfter pressing ok for the introduction, you\u2019ll see this:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(78810).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Since we\u2019ve already created a static ip, click on continue.\r\nNext, you'll be asked to select dns server. Please select google dns.\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(15006).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["After selecting press ok.\r\nAfter this you\u2019ll be asked if you want to add a blacklist from steven\u2019s blacklist. Click yes to it.\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(94760).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Pi hole by itself doesn\u2019t have any blacklist or the whitelist. We need to add from 3rd party providers. Ill provide details about that later.\r\nNext click yes to creating admin web interface:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(77023).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["After this, click yes to installing lighttpd webserver and the required modules:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(80694).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Next yes to query logging:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(1628).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Next select the anonymous mode:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(84517).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["That\u2019s it for this step. After completing all this you\u2019ll be redirected to the terminal. Wait for the installation to be completed.\r\nAfter the installation is complete, you\u2019ll see this:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(30510).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Note down your password and use the url to log into the web interface.\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(59735).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsx)(t.h2,{id:"configuration",children:"Configuration:"}),"\n",(0,n.jsx)(t.p,{children:"now that pi hole is installed. First, I\u2019ll give you the blacklists and whitelists link here below. After that ill explain how to add them."}),"\n",(0,n.jsx)(t.h2,{id:"blacklists",children:"Blacklists:"}),"\n",(0,n.jsxs)(t.p,{children:["\u2022\t",(0,n.jsx)(t.a,{href:"https://firebog.net/",children:"https://firebog.net/"}),"\r\nthis will have a collection of blacklists in it. Don\u2019t add to much, just maybe a few."]}),"\n",(0,n.jsx)(t.h2,{id:"whitelists",children:"Whitelists:"}),"\n",(0,n.jsxs)(t.p,{children:["\u2022\t ",(0,n.jsx)(t.a,{href:"https://github.com/anudeepND/whitelist/blob/master/domains/whitelist.txt",children:"https://github.com/anudeepND/whitelist/blob/master/domains/whitelist.txt"})]}),"\n",(0,n.jsx)(t.h2,{id:"how-to-set-these-blacklist-and-whitelists",children:"how to set these blacklist and whitelists:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"whitelists:"}),"\r\n\u2022\tGo to terminal and run this command:"]}),"\n",(0,n.jsxs)(t.h3,{id:"curl--o-whitelisttxt-httpsrawgithubusercontentcomanudeepndwhitelistmasterdomainswhitelisttxt",children:["curl -o whitelist.txt ",(0,n.jsx)(t.a,{href:"https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt",children:"https://raw.githubusercontent.com/anudeepND/whitelist/master/domains/whitelist.txt"})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"QRPS",src:s(27096).A+"",width:"1920",height:"947"})}),"\n",(0,n.jsx)(t.p,{children:"\u2022\tNext run this command. This will help to automatically add all the domains in the list to whitelist:"}),"\n",(0,n.jsxs)(t.p,{children:["while read domain; do pihole -w $domain; done < whitelist.txt\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(48225).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Next go to pi hole, go to the menu \u2013 tools \u2013 update gravity:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(17642).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsx)(t.p,{children:"Then click on update, this will put the whitelist inside the pi hole."}),"\n",(0,n.jsxs)(t.p,{children:["Now you can see the whitelists inside pi hole:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(72851).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsx)(t.h3,{id:"adding-blacklists",children:"Adding blacklists:"}),"\n",(0,n.jsxs)(t.p,{children:["Go to pi hole menu \u2013 adlists:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(77556).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Next go to firebog link I\u2019ve provided above. It will have a bunch of url. Copy one and paste it here:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(66225).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsxs)(t.p,{children:["Click add and the list will be added:\r\n",(0,n.jsx)(t.img,{alt:"QRPS",src:s(17832).A+"",width:"1920",height:"947"})]}),"\n",(0,n.jsx)(t.p,{children:"After doing this, go to update gravity and click update this will update the additional change we made now."})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},67966:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi1-476e5c3759290a68dcec6b3aba0f5827.png"},1628:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi10-6602fa6c37fd05e9a2aff44d0edce1d1.png"},84517:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi11-a927a7d3f1eace931dc73202f2ca2194.png"},30510:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi12-5f6292f8eef4ad41a8abe3c85656c25d.png"},59735:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi13-8362eff35f170e615fb7431a8090dc15.png"},27096:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi14-08d334afd77d5b97e51840e6681da0ba.png"},48225:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi15-feee4e9f3105da4a9f31f9c18ea1e9ba.png"},17642:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi16-fdab69824e5903252e85f69d1c9af2a2.png"},72851:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi17-c4730b4decdf6615bf4ba323270a4d97.png"},77556:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi18-d334803ec1ac753e2da97723ee95bb46.png"},18965:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi2-a17ac4a728f30564e72427b0a0520694.png"},66225:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi20-a51d9390b8c19f71a400852a2d615101.png"},17832:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi21-1845a8e19aa5315ba97a7add8f4b1084.png"},49868:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi3-d74d60ce069f23162a3921f6a033cd85.png"},80035:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi4-0b770fac6f3ef93644f54d6a9278f025.png"},78810:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi5-d4e6d9375761abfbb056c32beccec6f8.png"},15006:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi6-3420d660bb9de6c33bb49a78b8c2b317.png"},94760:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi7-e04179ebece3878bc7414b37fe0cd7ba.png"},77023:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi8-1b1ee8b007373e3e864bfd1e867d1575.png"},80694:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/pi9-f6a3cdba52b7176a460e0180fa38bdc5.png"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>l});var i=s(96540);const n={},a=i.createContext(n);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);