<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-project-1/iot/MQTTtoSerialCommunication_Markdown" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">MQTTtoSerialCommunication_Markdown | Redback Operations</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/redback-documentation/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/redback-documentation/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/redback-documentation/docs/project-1/iot/MQTTtoSerialCommunication_Markdown"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MQTTtoSerialCommunication_Markdown | Redback Operations"><meta data-rh="true" name="description" content="Last updated by &#x27;20/09/2024&#x27;"><meta data-rh="true" property="og:description" content="Last updated by &#x27;20/09/2024&#x27;"><link data-rh="true" rel="icon" href="/redback-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/redback-documentation/docs/project-1/iot/MQTTtoSerialCommunication_Markdown"><link data-rh="true" rel="alternate" href="https://github.com/redback-documentation/docs/project-1/iot/MQTTtoSerialCommunication_Markdown" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/redback-documentation/docs/project-1/iot/MQTTtoSerialCommunication_Markdown" hreflang="x-default"><link rel="stylesheet" href="/redback-documentation/assets/css/styles.24ac416b.css">
<script src="/redback-documentation/assets/js/runtime~main.ad9ebb00.js" defer="defer"></script>
<script src="/redback-documentation/assets/js/main.a5c79969.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/redback-documentation/"><div class="navbar__logo"><img src="/redback-documentation/img/logo.svg" alt="Redback" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/redback-documentation/img/logo.svg" alt="Redback" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Redback</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/redback-documentation/docs/category/onboarding">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Redback-Operations" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/onboarding">Onboarding</a><button aria-label="Expand sidebar category &#x27;Onboarding&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/company-policies">Company Policies</a><button aria-label="Expand sidebar category &#x27;Company Policies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/redback-documentation/docs/category/project-1">Project 1</a><button aria-label="Collapse sidebar category &#x27;Project 1&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/vr">VR</a><button aria-label="Expand sidebar category &#x27;VR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/redback-documentation/docs/category/iot">IoT</a><button aria-label="Collapse sidebar category &#x27;IoT&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/introduction">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/operation">Operation</a><button aria-label="Expand sidebar category &#x27;Operation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/technical-background-information">Technical Background Information</a><button aria-label="Expand sidebar category &#x27;Technical Background Information&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/codebase-documentation">Codebase Documentation</a><button aria-label="Expand sidebar category &#x27;Codebase Documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/redback-documentation/docs/project-1/iot/MQTTtoSerialCommunication_Markdown">MQTTtoSerialCommunication_Markdown</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/redback-documentation/docs/category/ble-connectivity">BLE Connectivity</a><button aria-label="Expand sidebar category &#x27;BLE Connectivity&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-2">Project 2</a><button aria-label="Expand sidebar category &#x27;Project 2&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-3">Project 3</a><button aria-label="Expand sidebar category &#x27;Project 3&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-4">Project 4</a><button aria-label="Expand sidebar category &#x27;Project 4&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-5">Project 5</a><button aria-label="Expand sidebar category &#x27;Project 5&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/cyber-security-team">Cyber Security Team</a><button aria-label="Expand sidebar category &#x27;Cyber Security Team&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/data-warehousing-team">Data Warehousing Team</a><button aria-label="Expand sidebar category &#x27;Data Warehousing Team&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/web--mobile-app-dev">Web &amp; Mobile App Dev</a><button aria-label="Expand sidebar category &#x27;Web &amp; Mobile App Dev&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/examples--tutorials">Examples / Tutorials</a><button aria-label="Expand sidebar category &#x27;Examples / Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/documentation-maintenance">Documentation Maintenance</a><button aria-label="Expand sidebar category &#x27;Documentation Maintenance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/redback-documentation/docs/orion-backend/kafkadocs/">orion-backend</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/redback-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/redback-documentation/docs/category/project-1"><span itemprop="name">Project 1</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/redback-documentation/docs/category/iot"><span itemprop="name">IoT</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MQTTtoSerialCommunication_Markdown</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p><strong>Last updated by:</strong> Kaleb, <strong>Last updated on:</strong> &#x27;20/09/2024&#x27;</p>
<p><strong>Last updated by:</strong> Kaleb, <strong>Last updated on:</strong> &#x27;20/09/2024&#x27;</p>
<header><h1>Moving from Wireless MQTT connection to Serial</h1></header>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Important!</div><div class="admonitionContent_BuS1"><p>The VR headset does not have serial support and hence the following cannot be implemented.</p></div></div>
<p>To switch from MQTT to serial communication for handling the button presses, you will need to modify your setup to use a serial connection (e.g., USB serial) instead of MQTT. Additionally, you will need a way to dynamically detect the serial port used by your device.</p>
<p>Here&#x27;s how you can achieve this:</p>
<p>Steps to Implement Serial Communication</p>
<p>a)   	Identify Available Serial Ports: Use the <code>serial.tools.list_ports</code> module to dynamically identify available serial ports.</p>
<p>b)  	Setup Serial Communication: Initialize the serial connection and read button states through the serial port.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-example">Code Example<a href="#code-example" class="hash-link" aria-label="Direct link to Code Example" title="Direct link to Code Example">​</a></h2>
<p>Here is an example Python script that replaces MQTT with serial communication. This script will dynamically find the correct serial port and read the button states from the Raspberry Pi.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="required-libraries">Required Libraries<a href="#required-libraries" class="hash-link" aria-label="Direct link to Required Libraries" title="Direct link to Required Libraries">​</a></h2>
<p>First, make sure you have the <code>pyserial</code> library installed:</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/09fe7719-cc10-41e3-8674-450f836c03cd" alt="image" class="img_ev3q">
<img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/a903afd6-c83a-49e6-a699-636404ee7479" alt="image" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="explanation-of-the-code">Explanation of the Code<a href="#explanation-of-the-code" class="hash-link" aria-label="Direct link to Explanation of the Code" title="Direct link to Explanation of the Code">​</a></h2>
<p>a)   	GPIO Setup: Same as before, configuring pins 11 and 12 as inputs for the right and left turn buttons, respectively.</p>
<p>b)  	Serial Port Detection: The <code>find_serial_port</code> function scans all available serial ports and returns the one that is suitable (e.g., containing &quot;USB&quot; or &quot;ACM&quot; in the description). Adjust this logic based on your specific device&#x27;s identifiers.</p>
<p>c)   	Serial Communication: The <code>ButtonTest</code> function now sends button states over the serial connection instead of MQTT. The serial connection is established with the detected port using a baud rate of 9600 (adjustable as needed).</p>
<p>d)  	Main Loop: Continuously calls the <code>ButtonTest</code> function every second to check the button states and send updates via the serial connection.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-serial-port-changes">Handling Serial Port Changes<a href="#handling-serial-port-changes" class="hash-link" aria-label="Direct link to Handling Serial Port Changes" title="Direct link to Handling Serial Port Changes">​</a></h2>
<p>If the serial port changes, the script will dynamically detect the correct port at startup. Ensure that your VR game or receiving system is set up to handle incoming data over the serial connection.</p>
<p>This setup should provide a seamless transition from MQTT to serial communication, with dynamic port detection to handle different connection scenarios.</p>
<p>Below are detailed steps to implement serial communication for handling button presses in your smart bike project. This section will guide you through setting up serial communication, identifying available serial ports dynamically, and replacing MQTT with serial data transmission.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="steps-to-implement-serial-communication">Steps to Implement Serial Communication<a href="#steps-to-implement-serial-communication" class="hash-link" aria-label="Direct link to Steps to Implement Serial Communication" title="Direct link to Steps to Implement Serial Communication">​</a></h2>
<p>a)   	Install Required Libraries</p>
<p>Before starting, ensure you have the necessary libraries installed. You&#x27;ll need <code>pyserial</code> for serial communication. Install it using pip:</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/33ca3efe-5bf4-44d2-808a-d53deded8ee3" alt="image" class="img_ev3q"></p>
<p>b)  	Configure GPIO for Button Inputs</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/a569796b-52a8-427a-b5c6-84a695a7ca81" alt="image" class="img_ev3q"></p>
<p>Set up the GPIO pins on your Raspberry Pi to read the states of the buttons. Configure pins 11 and 12 as inputs for the right and left turn buttons, respectively.</p>
<p>c)   	Identify Available Serial Ports Dynamically</p>
<p>To make your system robust and flexible, it&#x27;s important to dynamically identify the serial port that the Raspberry Pi will use to communicate with the VR game. This way, you won&#x27;t have to manually specify the port each time it changes.</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/c8874062-0af1-44c3-aa4c-7df379ea4e8d" alt="image" class="img_ev3q"></p>
<p>In this function, <code>serial.tools.list_ports.comports()</code> lists all available serial ports. The function checks each port description for identifiers such as &quot;USB&quot; or &quot;ACM&quot;. If a suitable port is found, it returns the port name (e.g., <code>/dev/ttyUSB0</code>).</p>
<p>d)  	Setup Serial Communication</p>
<p>Initialize the serial connection using the port identified in the previous step. Set an appropriate baud rate (e.g., 9600).</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/aecf62b4-363a-4aae-ba3c-ca541aa51e7c" alt="image" class="img_ev3q"></p>
<p>e)  	Replace MQTT with Serial Communication</p>
<p>Modify the button state checking function to send data over the serial connection instead of publishing to MQTT topics.</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/e881f0a6-7689-446b-8bbc-c498b1267dd1" alt="image" class="img_ev3q"></p>
<p>In this function, <code>serial_conn.write</code> sends the button states (<code>RIGHT</code>, <code>R_LOW</code>, <code>LEFT</code>, <code>L_LOW</code>) as byte strings over the serial connection.</p>
<p>f)        Implement the Main Loop</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/e34a4847-a13f-45ec-b176-379d032b939f" alt="image" class="img_ev3q"></p>
<p>In the main part of your script, use a loop to continuously read the button states and send updates via the serial connection. Ensure proper cleanup and error handling.</p>
<p>g) Ensure Proper Resource Management</p>
<p>·   	Error Handling: The <code>try</code> block ensures that any exceptions (e.g., no serial port found) are caught and handled gracefully.</p>
<p>·   	Cleanup: The <code>except KeyboardInterrupt</code> block ensures that GPIO pins are cleaned up and the serial connection is closed when the script is interrupted (e.g., by pressing Ctrl+C).</p>
<p>By following these steps, you transition your button handling from MQTT to serial communication, making the system adaptable to different port configurations. The key steps include configuring GPIO pins, dynamically identifying serial ports, setting up the serial connection, and sending button states over this connection. This approach enhances flexibility and robustness in your smart bike project, ensuring smooth integration with the VR game.</p>
<p>Handling serial port changes dynamically is crucial for ensuring that your system can adapt to different hardware configurations and connection scenarios. Here&#x27;s a detailed explanation on how to handle serial port changes effectively:</p>
<p>Handling Serial Port Changes: When dealing with serial communication, it&#x27;s common to encounter scenarios where the serial port name or connection changes. This could happen if you plug the device into a different USB port, use a different computer, or if the operating system assigns a different port name. To manage these changes gracefully, follow these steps:</p>
<p>a)   	Dynamic Serial Port Detection</p>
<p>Instead of hardcoding the serial port name, use a method to dynamically detect the available serial ports and select the correct one based on specific criteria.</p>
<p>Code Example for Dynamic Port Detection:</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/aa90282e-1143-4800-b106-0fdb95f29502" alt="image" class="img_ev3q"></p>
<p>In this function:</p>
<p>·   	<code>serial.tools.list_ports.comports()</code> provides a list of all available serial ports.</p>
<p>·   	The function iterates through the list, checking each port’s description or device name for keywords like &quot;USB&quot; or &quot;ACM&quot;, which are typically associated with USB serial devices.</p>
<p>·   	If a matching port is found, the function returns the port name (e.g., <code>/dev/ttyUSB0</code> or <code>COM3</code>).</p>
<p>·   	If no matching port is found, an exception is raised.</p>
<p>b)  	Initialize Serial Communication</p>
<p>Use the detected serial port to establish a serial connection. This ensures that your application connects to the correct port, regardless of changes.</p>
<p>Code Example for Serial Initialization:</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/6bf53f94-7393-4e18-9ad7-f98dcdc1ce05" alt="image" class="img_ev3q"></p>
<p>In this example:</p>
<p>·   	The <code>find_serial_port()</code> function is called to get the correct serial port.</p>
<p>·   	<code>serial.Serial</code> is used to open a connection to the detected port with a specified baud rate and timeout.</p>
<p>·   	If an exception occurs (e.g., no suitable port found), it is caught and printed.</p>
<p>c)   	Continuous Monitoring and Error Handling</p>
<p>In the main loop of your application, monitor the button states and handle any exceptions that may occur during serial communication. This ensures that your application can recover gracefully from errors such as disconnection or port changes.</p>
<p>##Code Example for Main Loop with Error Handling:</p>
<p><img decoding="async" loading="lazy" src="https://github.com/KrishnPrayag/redback-documentation/assets/127953518/8cff291f-3819-4c45-a6d3-629ac65f4423" alt="image" class="img_ev3q"></p>
<p>In this example:</p>
<p>·   	The main loop continuously calls <code>ButtonTest</code> to read button states and send them over the serial connection.</p>
<p>·   	If a <code>serial.SerialException</code> occurs (e.g., due to disconnection), it is caught, and the script attempts to reinitialize the serial connection by finding the port again and reopening it.</p>
<p>·   	The outer <code>try</code> block handles general exceptions, ensuring that any other errors are caught and handled gracefully.</p>
<p>·   	The <code>KeyboardInterrupt</code> exception ensures that the GPIO pins are cleaned up and the serial connection is closed when the script is interrupted.</p>
<p>Handling serial port changes dynamically involves:</p>
<p>·   	Dynamic Port Detection: Using <code>serial.tools.list_ports</code> to list and identify available serial ports based on specific criteria (e.g., containing &quot;USB&quot; or &quot;ACM&quot;).</p>
<p>·   	Robust Initialization: Establishing the serial connection using the detected port and handling exceptions to ensure the connection can be reestablished if it changes.</p>
<p>·   	Continuous Monitoring and Error Handling: Implementing error handling in the main loop to detect and recover from serial communication errors, such as disconnections.</p>
<p>This approach ensures that your system remains flexible and resilient to changes in the serial port configuration, providing a seamless user experience.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Redback-Operations/redback-documentation/blob/main/docs/project-1/iot/MQTTtoSerialCommunication_Markdown.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/redback-documentation/docs/project-1/iot/codebase-documentation/drivers/Cadence-sensor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cadence-sensor</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/redback-documentation/docs/category/ble-connectivity"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">BLE Connectivity</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#code-example" class="table-of-contents__link toc-highlight">Code Example</a></li><li><a href="#required-libraries" class="table-of-contents__link toc-highlight">Required Libraries</a></li><li><a href="#explanation-of-the-code" class="table-of-contents__link toc-highlight">Explanation of the Code</a></li><li><a href="#handling-serial-port-changes" class="table-of-contents__link toc-highlight">Handling Serial Port Changes</a></li><li><a href="#steps-to-implement-serial-communication" class="table-of-contents__link toc-highlight">Steps to Implement Serial Communication</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Info</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/redback-documentation/docs/category/onboarding">Docs</a></li><li class="footer__item"><a href="https://github.com/Redback-Operations" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Redback Operations</div></div></div></footer></div>
</body>
</html>