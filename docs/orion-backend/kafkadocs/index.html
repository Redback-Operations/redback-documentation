<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-orion-backend/kafkadocs/readme" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">readme | Redback Operations</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/redback-documentation/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/redback-documentation/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/redback-documentation/docs/orion-backend/kafkadocs/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="readme | Redback Operations"><meta data-rh="true" name="description" content="Last updated by &#x27;29/04/2025&#x27;"><meta data-rh="true" property="og:description" content="Last updated by &#x27;29/04/2025&#x27;"><link data-rh="true" rel="icon" href="/redback-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/redback-documentation/docs/orion-backend/kafkadocs/"><link data-rh="true" rel="alternate" href="https://github.com/redback-documentation/docs/orion-backend/kafkadocs/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/redback-documentation/docs/orion-backend/kafkadocs/" hreflang="x-default"><link rel="stylesheet" href="/redback-documentation/assets/css/styles.24ac416b.css">
<script src="/redback-documentation/assets/js/runtime~main.ad9ebb00.js" defer="defer"></script>
<script src="/redback-documentation/assets/js/main.a5c79969.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/redback-documentation/"><div class="navbar__logo"><img src="/redback-documentation/img/logo.svg" alt="Redback" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/redback-documentation/img/logo.svg" alt="Redback" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Redback</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/redback-documentation/docs/category/onboarding">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Redback-Operations" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/onboarding">Onboarding</a><button aria-label="Expand sidebar category &#x27;Onboarding&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/company-policies">Company Policies</a><button aria-label="Expand sidebar category &#x27;Company Policies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-1">Project 1</a><button aria-label="Expand sidebar category &#x27;Project 1&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-2">Project 2</a><button aria-label="Expand sidebar category &#x27;Project 2&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-3">Project 3</a><button aria-label="Expand sidebar category &#x27;Project 3&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-4">Project 4</a><button aria-label="Expand sidebar category &#x27;Project 4&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/project-5">Project 5</a><button aria-label="Expand sidebar category &#x27;Project 5&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/cyber-security-team">Cyber Security Team</a><button aria-label="Expand sidebar category &#x27;Cyber Security Team&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/data-warehousing-team">Data Warehousing Team</a><button aria-label="Expand sidebar category &#x27;Data Warehousing Team&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/web--mobile-app-dev">Web &amp; Mobile App Dev</a><button aria-label="Expand sidebar category &#x27;Web &amp; Mobile App Dev&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/examples--tutorials">Examples / Tutorials</a><button aria-label="Expand sidebar category &#x27;Examples / Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/redback-documentation/docs/category/documentation-maintenance">Documentation Maintenance</a><button aria-label="Expand sidebar category &#x27;Documentation Maintenance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/redback-documentation/docs/orion-backend/kafkadocs/">orion-backend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/redback-documentation/docs/orion-backend/kafkadocs/">Kafka Documentation</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/redback-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">orion-backend</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Kafka Documentation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p><strong>Last updated by:</strong> BINIL TOM JOSE, <strong>Last updated on:</strong> &#x27;29/04/2025&#x27;</p>
<p><strong>Last updated by:</strong> BINIL TOM JOSE, <strong>Last updated on:</strong> &#x27;29/04/2025&#x27;</p>
<header><h1>Kafka Python Documentation - Table of Contents</h1></header>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sidebar_position-3">sidebar_position: 3<a href="#sidebar_position-3" class="hash-link" aria-label="Direct link to sidebar_position: 3" title="Direct link to sidebar_position: 3">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<ul>
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#key-features">Key Features</a></li>
<li><a href="#quick-start-guide">Quick Start</a></li>
<li><a href="#use-cases">Use Cases</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#setup-instructions">Setup Instructions</a></li>
<li><a href="#environment-configuration">Environment Configuration</a></li>
<li><a href="#troubleshooting-installation">Troubleshooting Installation</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-concepts">Core Concepts<a href="#core-concepts" class="hash-link" aria-label="Direct link to Core Concepts" title="Direct link to Core Concepts">​</a></h2>
<ul>
<li><a href="#kafka-architecture-overview">Kafka Architecture Overview</a></li>
<li><a href="#producer-consumer-model">Producer-Consumer Model</a></li>
<li><a href="#topics-and-partitions">Topics and Partitions</a></li>
<li><a href="#message-delivery-semantics">Message Delivery Semantics</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<ul>
<li><a href="#basic-setup">Basic Setup</a></li>
<li><a href="#simple-producer-example">Simple Producer Example</a></li>
<li><a href="#simple-consumer-example">Simple Consumer Example</a></li>
<li><a href="#configuration-options">Configuration Options</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-reference">API Reference<a href="#api-reference" class="hash-link" aria-label="Direct link to API Reference" title="Direct link to API Reference">​</a></h2>
<ul>
<li><a href="#producer-api">Producer API</a></li>
<li><a href="#consumer-api">Consumer API</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-usage">Advanced Usage<a href="#advanced-usage" class="hash-link" aria-label="Direct link to Advanced Usage" title="Direct link to Advanced Usage">​</a></h2>
<ul>
<li><a href="#serialization-and-deserialization">Serialization and Deserialization</a></li>
<li><a href="#error-handling-and-retry-mechanism">Error Handling and Retry Mechanisms</a></li>
<li><a href="#performance-tuning">Performance Tuning</a></li>
<li><a href="#monitoring-and-metrics">Monitoring and Metrics</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">​</a></h2>
<ul>
<li><a href="#production-best-practices">Production Best Practices</a></li>
<li><a href="#scaling-considerations">Scaling Considerations</a></li>
<li><a href="#containerization-with-docker">Containerization with Docker</a></li>
<li><a href="#cloud-deployment-options">Cloud Deployment Options</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2>
<ul>
<li><a href="#basic-examples">Basic Examples</a></li>
<li><a href="#real-world-scenarios">Real World Scenarios</a></li>
<li><a href="#integration-with-other-systems">Integration with Other Systems</a></li>
<li><a href="#batch-processing">Batch Processing</a></li>
<li><a href="#stream-processing">Stream Processing</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contributing">Contributing<a href="#contributing" class="hash-link" aria-label="Direct link to Contributing" title="Direct link to Contributing">​</a></h2>
<ul>
<li><a href="#development-setup">Development Setup</a></li>
<li><a href="#code-style-guidelines">Code Style Guidelines</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#pull-request-process">Pull Request process</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<ul>
<li><a href="#common-issues">Common Issues</a></li>
<li><a href="#debugging-tips">Debugging Tips</a></li>
<li><a href="#faq">FAQ</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix">​</a></h2>
<ul>
<li><a href="#glossary">Glossary</a></li>
<li><a href="#additional-resources">Additonal Resources</a></li>
<li><a href="#version-history">Version History</a></li>
</ul>
<h1>Project Overview</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-python-backend-for-crowd-monitoring">Kafka Python Backend for Crowd Monitoring<a href="#kafka-python-backend-for-crowd-monitoring" class="hash-link" aria-label="Direct link to Kafka Python Backend for Crowd Monitoring" title="Direct link to Kafka Python Backend for Crowd Monitoring">​</a></h2>
<p>The <strong>Kafka Python Backend</strong> is a critical component of the Crowd Monitoring system designed to process images and video frames for face detection using a messaging architecture. This backend infrastructure leverages Apache Kafka for efficient message handling, FastAPI for lightweight API endpoints, and a modular face detection model for identifying faces in crowd monitoring applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose">​</a></h2>
<p>The main goals of this project are:</p>
<ol>
<li>Process images and video frames for crowd monitoring applications</li>
<li>Implement a producer-consumer architecture for distributed message processing</li>
<li>Utilize Apache Kafka to handle high-throughput message streams efficiently</li>
<li>Provide REST API endpoints through FastAPI for system integration</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a href="#architecture-overview" class="hash-link" aria-label="Direct link to Architecture Overview" title="Direct link to Architecture Overview">​</a></h2>
<p>This project implements a messaging-based architecture with:</p>
<ul>
<li><strong>Kafka Message Broker</strong>: Handles communication between components for crowd monitoring data</li>
<li><strong>FastAPI Service</strong>: Provides REST API endpoints for sending and receiving detection results</li>
<li><strong>Background Processing</strong>: Runs Kafka consumer in a separate thread for continuous operation</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-components">Technical Components<a href="#technical-components" class="hash-link" aria-label="Direct link to Technical Components" title="Direct link to Technical Components">​</a></h2>
<ul>
<li><strong>app.py</strong>: FastAPI application with Kafka integration and REST endpoints</li>
<li><strong>model.py</strong>: YOLOv3 face detection implementation with JSON result formatting</li>
<li><strong>producer.py</strong>: Face detection code for producing messages to Kafka</li>
<li><strong>consumer.py</strong>: Kafka consumer for processing face detection results and storing in PostgreSQL</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements">System Requirements<a href="#system-requirements" class="hash-link" aria-label="Direct link to System Requirements" title="Direct link to System Requirements">​</a></h2>
<ul>
<li><strong>Python</strong>: 3.10 or higher</li>
<li><strong>Kafka</strong>: Running in Docker</li>
<li><strong>Package Manager</strong>: uv 0.6 or higher</li>
<li><strong>Web Framework</strong>: FastAPI</li>
<li><strong>Container Platform</strong>: Docker &amp; Docker Compose</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup--deployment">Setup &amp; Deployment<a href="#setup--deployment" class="hash-link" aria-label="Direct link to Setup &amp; Deployment" title="Direct link to Setup &amp; Deployment">​</a></h2>
<p>The system is deployed on the Redback server, where Kafka, PostgreSQL, RabbitMQ, and Airflow are pre-configured and running.
Local Python development is supported via a virtual environment using the uv tool. API documentation is accessible through the built-in Swagger UI when the FastAPI service is running.</p>
<hr>
<p><a href=":/e603cea36b144275b9d1db73c2452e51" target="_blank" rel="noopener noreferrer">Table of Contents</a> | <a href=":/407760a71f504e3aa2270f122abacf6e" target="_blank" rel="noopener noreferrer">Next: Key Features</a></p>
<h1>Quick Start Guide</h1>
<p>This guide will help you quickly set up and run the Kafka Python Backend for your Crowd Monitoring project.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>Before you begin, ensure you have the following installed:</p>
<ul>
<li>Python 3.10 or higher</li>
<li>(Optional) Docker, only if you plan to run services locally instead of using Redback</li>
<li>uv 0.6 or higher</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-steps">Installation Steps<a href="#installation-steps" class="hash-link" aria-label="Direct link to Installation Steps" title="Direct link to Installation Steps">​</a></h2>
<ol>
<li>
<p><strong>Clone the repository</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git clone https://github.com/sumituiet/kafka_python.git</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">cd kafka_python</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Access hosted services (Redback)</strong>
You can access the pre-configured services on the Deakin Redback server via:</p>
<p>Kafka UI: <a href="http://redback.it.deakin.edu.au:8080" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8080</a></p>
<p>RabbitMQ Management: <a href="http://redback.it.deakin.edu.au:15672" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:15672</a></p>
<p>Airflow Web UI: <a href="http://redback.it.deakin.edu.au:8888" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8888</a></p>
</li>
<li>
<p><strong>Create and activate a virtual environment using uv</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">uv venv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Activate the virtual environemnt (Windows/macOS/Linux)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">source .venv/bin/activate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>(Optional) Install uv inside the environment if not already available</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">pip install uv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-application">Running the Application<a href="#running-the-application" class="hash-link" aria-label="Direct link to Running the Application" title="Direct link to Running the Application">​</a></h2>
<ol>
<li><strong>Start the FastAPI server</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">fastapi dev app.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>The server will start at <a href="http://127.0.0.1:8000" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000</a>
Access the API documentation</p>
<p>Open your browser and navigate to <a href="http://127.0.0.1:8000/docs" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000/docs</a>
This interactive documentation allows you to test all API endpoints</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-face-detection">Testing Face Detection<a href="#testing-face-detection" class="hash-link" aria-label="Direct link to Testing Face Detection" title="Direct link to Testing Face Detection">​</a></h2>
<ol>
<li>Send a test message</li>
</ol>
<ul>
<li>Use the /send endpoint to publish a test message to Kafka
Example :</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;content&quot;: &quot;process_image&quot;,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;sender&quot;: &quot;test_client&quot;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Process an image</li>
</ol>
<ul>
<li>Place test images in your project directory</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">from model import detect_faces</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">results = detect_faces(&quot;path/to/image.jpg&quot;)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">print(results)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Retreive processed images</li>
</ol>
<ul>
<li>Use the /receive endpoint to get messages from the Kafka consumer.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">Monitoring<a href="#monitoring" class="hash-link" aria-label="Direct link to Monitoring" title="Direct link to Monitoring">​</a></h2>
<ul>
<li>
<p>Check your terminal or logs for Kafka consumer output</p>
</li>
<li>
<p>PostgreSQL stores all processed face detection results — use tools like pgAdmin or psql CLI to inspect stored data</p>
</li>
<li>
<p>Use Kafka UI at <a href="http://redback.it.deakin.edu.au:8080" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8080</a> to monitor Kafka topics and message flow</p>
</li>
</ul>
<h1>Key Features</h1>
<p>The Kafka Python Backend with Face Detection offers specialized features designed for real-time face detection and messaging:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-features">Core Features<a href="#core-features" class="hash-link" aria-label="Direct link to Core Features" title="Direct link to Core Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-message-processing">Real-time Message Processing<a href="#real-time-message-processing" class="hash-link" aria-label="Direct link to Real-time Message Processing" title="Direct link to Real-time Message Processing">​</a></h3>
<ul>
<li>Asynchronous communication through Kafka messaging system</li>
<li>In-memory message queue for temporary storage</li>
<li>Background thread consumer for continuous message processing</li>
<li>Efficient message handling with JSON serialization</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fastapi-integration">FastAPI Integration<a href="#fastapi-integration" class="hash-link" aria-label="Direct link to FastAPI Integration" title="Direct link to FastAPI Integration">​</a></h3>
<ul>
<li>High-performance RESTful API endpoints</li>
<li>JSON-based message format for seamless data exchange</li>
<li>Simple <code>/send</code> endpoint for message production</li>
<li><code>/receive</code> endpoint for retrieving processed messages</li>
<li>Automatic cleanup of delivered messages</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-powered-architecture">Kafka-Powered Architecture<a href="#kafka-powered-architecture" class="hash-link" aria-label="Direct link to Kafka-Powered Architecture" title="Direct link to Kafka-Powered Architecture">​</a></h3>
<ul>
<li>Producer-consumer pattern for distributed processing</li>
<li>Reliable message delivery with Kafka guarantees</li>
<li>Configurable broker settings</li>
<li>Topic-based message organization</li>
<li>JSON serialization/deserialization for structured data</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-features">Additional Features<a href="#additional-features" class="hash-link" aria-label="Direct link to Additional Features" title="Direct link to Additional Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="structured-face-detection-results">Structured Face Detection Results<a href="#structured-face-detection-results" class="hash-link" aria-label="Direct link to Structured Face Detection Results" title="Direct link to Structured Face Detection Results">​</a></h3>
<ul>
<li>Frame identification for video processing</li>
<li>Total face count in each processed image</li>
<li>Detailed face records with unique IDs</li>
<li>Precise bounding box coordinates (x, y, width, height)</li>
<li>Confidence scores for each detected face</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-persistence">Data Persistence<a href="#data-persistence" class="hash-link" aria-label="Direct link to Data Persistence" title="Direct link to Data Persistence">​</a></h3>
<ul>
<li>PostgreSQL integration for storing  results</li>
<li>Structured data format for efficient querying</li>
<li>Persistent storage of detection results</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flexible-processing-options">Flexible Processing Options<a href="#flexible-processing-options" class="hash-link" aria-label="Direct link to Flexible Processing Options" title="Direct link to Flexible Processing Options">​</a></h3>
<ul>
<li>Support for file-based image processing</li>
<li>Frame-by-frame video processing capabilities</li>
<li>Customizable confidence thresholds</li>
<li>Non-maximum suppression for removing duplicate detections</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-friendly-implementation">Developer-Friendly Implementation<a href="#developer-friendly-implementation" class="hash-link" aria-label="Direct link to Developer-Friendly Implementation" title="Direct link to Developer-Friendly Implementation">​</a></h3>
<ul>
<li>Modular code organization</li>
<li>Clear separation of concerns</li>
<li>Easily extendable architecture</li>
<li>Simple configuration of Kafka brokers and topics</li>
</ul>
<hr>
<p><a href=":/2c760b6d4d4a4c9bb4ab1bb2938566e6" target="_blank" rel="noopener noreferrer">Project Overview</a> | <a href=":/e603cea36b144275b9d1db73c2452e51" target="_blank" rel="noopener noreferrer">Table of Contents</a> | <a href=":/387aff55a3b14a4e87e8a65b455deaee" target="_blank" rel="noopener noreferrer">Use Cases</a></p>
<h1>Use Cases</h1>
<p>This document outlines the primary use cases for the Kafka Python Backend with YOLOv3 face detection in crowd monitoring applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="crowd-analysis">Crowd Analysis<a href="#crowd-analysis" class="hash-link" aria-label="Direct link to Crowd Analysis" title="Direct link to Crowd Analysis">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-crowd-density-monitoring">Real-time Crowd Density Monitoring<a href="#real-time-crowd-density-monitoring" class="hash-link" aria-label="Direct link to Real-time Crowd Density Monitoring" title="Direct link to Real-time Crowd Density Monitoring">​</a></h3>
<ul>
<li><strong>Description</strong>: Monitor crowd density in public spaces by detecting and counting faces in video streams.</li>
<li><strong>Implementation</strong>: Security camera feeds are processed frame-by-frame using the YOLOv3 model, with face counts published to Kafka topics for real-time monitoring.</li>
<li><strong>Benefit</strong>: Allows security personnel to identify potential overcrowding situations before they become dangerous.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="facility-capacity-management">Facility Capacity Management<a href="#facility-capacity-management" class="hash-link" aria-label="Direct link to Facility Capacity Management" title="Direct link to Facility Capacity Management">​</a></h3>
<ul>
<li><strong>Description</strong>: Track facility occupancy levels to ensure compliance with capacity regulations.</li>
<li><strong>Implementation</strong>: The system processes entrance and exit camera feeds, using face detection to count individuals entering and leaving the facility.</li>
<li><strong>Benefit</strong>: Helps venues maintain safe occupancy levels and comply with safety regulations.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-applications">Security Applications<a href="#security-applications" class="hash-link" aria-label="Direct link to Security Applications" title="Direct link to Security Applications">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unauthorized-access-detection">Unauthorized Access Detection<a href="#unauthorized-access-detection" class="hash-link" aria-label="Direct link to Unauthorized Access Detection" title="Direct link to Unauthorized Access Detection">​</a></h3>
<ul>
<li><strong>Description</strong>: Monitor restricted areas for unauthorized personnel.</li>
<li><strong>Implementation</strong>: The system continuously processes camera feeds from restricted areas, sending alerts when faces are detected in zones that should be vacant.</li>
<li><strong>Benefit</strong>: Enhances security by providing immediate notification when restricted zones are breached.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="anomalous-behavior-detection">Anomalous Behavior Detection<a href="#anomalous-behavior-detection" class="hash-link" aria-label="Direct link to Anomalous Behavior Detection" title="Direct link to Anomalous Behavior Detection">​</a></h3>
<ul>
<li><strong>Description</strong>: Identify unusual crowd movements or gatherings.</li>
<li><strong>Implementation</strong>: By analyzing the number and distribution of detected faces over time, the system can recognize sudden changes in crowd patterns.</li>
<li><strong>Benefit</strong>: Helps security teams respond proactively to potentially problematic situations.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="marketing-and-analytics">Marketing and Analytics<a href="#marketing-and-analytics" class="hash-link" aria-label="Direct link to Marketing and Analytics" title="Direct link to Marketing and Analytics">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customer-traffic-analysis">Customer Traffic Analysis<a href="#customer-traffic-analysis" class="hash-link" aria-label="Direct link to Customer Traffic Analysis" title="Direct link to Customer Traffic Analysis">​</a></h3>
<ul>
<li><strong>Description</strong>: Analyze customer traffic patterns in retail environments.</li>
<li><strong>Implementation</strong>: Face detection data from store cameras is processed to generate heatmaps of customer presence throughout business hours.</li>
<li><strong>Benefit</strong>: Provides retailers with valuable insights for optimizing store layouts and staffing.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="engagement-measurement">Engagement Measurement<a href="#engagement-measurement" class="hash-link" aria-label="Direct link to Engagement Measurement" title="Direct link to Engagement Measurement">​</a></h3>
<ul>
<li><strong>Description</strong>: Measure audience engagement with displays or presentations.</li>
<li><strong>Implementation</strong>: By detecting faces oriented toward displays, the system can estimate attention levels and dwell time.</li>
<li><strong>Benefit</strong>: Helps marketing teams evaluate the effectiveness of visual merchandising and advertisements.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-management">Event Management<a href="#event-management" class="hash-link" aria-label="Direct link to Event Management" title="Direct link to Event Management">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="queue-management">Queue Management<a href="#queue-management" class="hash-link" aria-label="Direct link to Queue Management" title="Direct link to Queue Management">​</a></h3>
<ul>
<li><strong>Description</strong>: Monitor queue lengths and waiting times.</li>
<li><strong>Implementation</strong>: Camera feeds focused on queuing areas are processed to count faces, with data used to estimate wait times.</li>
<li><strong>Benefit</strong>: Improves customer experience by allowing staff to open additional service points when queues grow too long.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-attendance-tracking">Event Attendance Tracking<a href="#event-attendance-tracking" class="hash-link" aria-label="Direct link to Event Attendance Tracking" title="Direct link to Event Attendance Tracking">​</a></h3>
<ul>
<li><strong>Description</strong>: Track attendance at events or specific areas.</li>
<li><strong>Implementation</strong>: The system processes video from entry points, using YOLOv3 face detection to count unique attendees.</li>
<li><strong>Benefit</strong>: Provides accurate attendance metrics for event organizers and sponsors.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="health-and-safety">Health and Safety<a href="#health-and-safety" class="hash-link" aria-label="Direct link to Health and Safety" title="Direct link to Health and Safety">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="social-distancing-compliance">Social Distancing Compliance<a href="#social-distancing-compliance" class="hash-link" aria-label="Direct link to Social Distancing Compliance" title="Direct link to Social Distancing Compliance">​</a></h3>
<ul>
<li><strong>Description</strong>: Monitor adherence to social distancing guidelines.</li>
<li><strong>Implementation</strong>: By analyzing the spatial distribution of detected faces, the system can identify areas where people are clustered too closely together.</li>
<li><strong>Benefit</strong>: Helps enforce health protocols and reduce transmission risks in public spaces.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="emergency-evacuation-management">Emergency Evacuation Management<a href="#emergency-evacuation-management" class="hash-link" aria-label="Direct link to Emergency Evacuation Management" title="Direct link to Emergency Evacuation Management">​</a></h3>
<ul>
<li><strong>Description</strong>: Support safe evacuations during emergencies.</li>
<li><strong>Implementation</strong>: Real-time face detection helps track crowd movement during evacuations, identifying bottlenecks or areas where people might be trapped.</li>
<li><strong>Benefit</strong>: Assists emergency responders in prioritizing rescue efforts and improving evacuation procedures.</li>
</ul>
<h1>Installation</h1>
<p>This guide will walk you through the complete installation process for the Kafka Python Backend with face detection support.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements-1">System Requirements<a href="#system-requirements-1" class="hash-link" aria-label="Direct link to System Requirements" title="Direct link to System Requirements">​</a></h3>
<ul>
<li><strong>Operating System</strong>: Linux (recommended), macOS, or Windows</li>
<li><strong>RAM</strong>: Minimum 8GB (16GB recommended for production)</li>
<li><strong>Storage</strong>: At least 10GB free disk space</li>
<li><strong>CPU</strong>: Multi-core processor (recommended for video processing)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-prerequisites">Software Prerequisites<a href="#software-prerequisites" class="hash-link" aria-label="Direct link to Software Prerequisites" title="Direct link to Software Prerequisites">​</a></h3>
<ul>
<li><strong>Python</strong>: Version 3.10 or higher</li>
<li><strong>Docker</strong>: Latest stable version</li>
<li><strong>Docker Compose</strong>: Latest stable version</li>
<li><strong>uv</strong>: Version 0.6 or higher (Python package manager)</li>
<li><strong>Git</strong>: For repository cloning</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-requirements">Network Requirements<a href="#network-requirements" class="hash-link" aria-label="Direct link to Network Requirements" title="Direct link to Network Requirements">​</a></h3>
<ul>
<li>Port 9092 available for Kafka broker</li>
<li>Port 8000 available for FastAPI service</li>
<li>Port 5432 open for PostgreSQL database (if accessing remotely)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-instructions">Setup Instructions<a href="#setup-instructions" class="hash-link" aria-label="Direct link to Setup Instructions" title="Direct link to Setup Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-clone-the-repository">1. Clone the Repository<a href="#1-clone-the-repository" class="hash-link" aria-label="Direct link to 1. Clone the Repository" title="Direct link to 1. Clone the Repository">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git clone https://github.com/sumituiet/kafka_python.git</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">cd kafka_python</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-access-hosted-services-redback">2. <strong>Access hosted services (Redback)</strong><a href="#2-access-hosted-services-redback" class="hash-link" aria-label="Direct link to 2-access-hosted-services-redback" title="Direct link to 2-access-hosted-services-redback">​</a></h3>
<p>You can access the pre-configured services on the Deakin Redback server via:</p>
<p>Kafka UI: <a href="http://redback.it.deakin.edu.au:8080" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8080</a></p>
<p>RabbitMQ Management: <a href="http://redback.it.deakin.edu.au:15672" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:15672</a></p>
<p>Airflow Web UI: <a href="http://redback.it.deakin.edu.au:8888" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8888</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-setup-python-environment">3. Setup Python Environment<a href="#3-setup-python-environment" class="hash-link" aria-label="Direct link to 3. Setup Python Environment" title="Direct link to 3. Setup Python Environment">​</a></h3>
<p><strong>Create and activate virtual environment using uv:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">uv venv</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">source .venv/bin/activate  # On Windows: .venv\Scripts\activate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Install required dependencies:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">uv install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-configuration">Environment Configuration<a href="#environment-configuration" class="hash-link" aria-label="Direct link to Environment Configuration" title="Direct link to Environment Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-configure-kafka-connection">1. Configure Kafka Connection<a href="#1-configure-kafka-connection" class="hash-link" aria-label="Direct link to 1. Configure Kafka Connection" title="Direct link to 1. Configure Kafka Connection">​</a></h3>
<p><strong>By default, the application connects to Kafka at localhost:9092. To modify this:
Edit app.py, producer.py, and consumer.py to update the KAFKA_BROKER variable:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain"># Default</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">KAFKA_BROKER = &quot;localhost:9092&quot;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"># Example for custom configuration</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">KAFKA_BROKER = &quot;your-kafka-server:9092&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-configure-topic-names">2. Configure Topic Names<a href="#2-configure-topic-names" class="hash-link" aria-label="Direct link to 2. Configure Topic Names" title="Direct link to 2. Configure Topic Names">​</a></h3>
<p><strong>Update Kafka Topics needed</strong>
<strong>In app.py (default)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">TOPIC_NAME = &quot;faces&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In consumer.py (default)
<strong>Consumer topic for &#x27;Faces&#x27;.</strong></p>
<h1>Troubleshooting Installation</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-issues">Docker Issues<a href="#docker-issues" class="hash-link" aria-label="Direct link to Docker Issues" title="Direct link to Docker Issues">​</a></h2>
<ul>
<li>
<p><strong>Problem</strong>: Docker services not starting<br>
<strong>Solution</strong>:</p>
<ul>
<li>Check if the Docker daemon is running:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">docker info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Ensure required ports are free:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">netstat -tulpn | grep &lt;port&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><strong>Problem</strong>: Kafka not accessible<br>
<strong>Solution</strong>:</p>
<ul>
<li>View Kafka logs:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">docker-compose logs kafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Check if Kafka is exposed on the correct port (<code>9092</code> by default)</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-environment-issues">Python Environment Issues<a href="#python-environment-issues" class="hash-link" aria-label="Direct link to Python Environment Issues" title="Direct link to Python Environment Issues">​</a></h2>
<ul>
<li>
<p><strong>Problem</strong>: <code>uv</code> command not found<br>
<strong>Solution</strong>:</p>
<ul>
<li>Install <code>uv</code> using pip:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">pip install uv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><strong>Problem</strong>: Package installation failures<br>
<strong>Solution</strong>:</p>
<ul>
<li>Check your Python version (recommended: Python 3.8+)</li>
<li>Update <code>uv</code> if already installed:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">pip install -U uv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connectivity-issues">Connectivity Issues<a href="#connectivity-issues" class="hash-link" aria-label="Direct link to Connectivity Issues" title="Direct link to Connectivity Issues">​</a></h2>
<ul>
<li><strong>Problem</strong>: Application can&#x27;t connect to Kafka<br>
<strong>Solution</strong>:<!-- -->
<ul>
<li>Confirm Kafka is running and healthy</li>
<li>Check firewall or VPN settings that might block port <code>9092</code></li>
<li>Verify the Kafka broker address in your config matches the container/service name</li>
</ul>
</li>
</ul>
<h1>Kafka Core Concepts</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-architecture-overview">Kafka Architecture Overview<a href="#kafka-architecture-overview" class="hash-link" aria-label="Direct link to Kafka Architecture Overview" title="Direct link to Kafka Architecture Overview">​</a></h2>
<p>Kafka operates as a distributed messaging system that follows a client-server architecture. Applications connect to Kafka brokers via configuration settings:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>This setting establishes the fundamental connection between client applications and the Kafka cluster, serving as the entry point for all communications. The cluster maintains topics that organize message streams, while clients interact with these topics through well-defined APIs.</strong></p>
<p>The Kafka broker handles message persistence, replication, and delivery, functioning as an intermediary between producers and consumers while maintaining highly available service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer-consumer-model">Producer-Consumer Model<a href="#producer-consumer-model" class="hash-link" aria-label="Direct link to Producer-Consumer Model" title="Direct link to Producer-Consumer Model">​</a></h3>
<p>The implementation demonstrates Kafka&#x27;s producer-consumer model through specialized components:</p>
<p><strong>Producers</strong>
Producers are applications that publish messages to specific topics. The code shows multiple producer implementations:</p>
<ul>
<li><code>A video frame producer that extracts and sends face detection data</code></li>
<li><code>A media stream producer that publishes encoded audio and video chunks</code></li>
<li><code>A messaging producer that sends chat data</code></li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">producer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaProducer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_serializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Consumers</strong>
Consumers subscribe to topics and process published messages. Different consumer implementations demonstrate varying consumption patterns:</p>
<ul>
<li><code>A face data consumer that processes detection results and stores them in a database</code></li>
<li><code>A video consumer that reconstructs frames from received data</code></li>
<li><code>A threaded consumer within a web application that maintains an in-memory queue</code></li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">consumer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaConsumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;Faces&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;earliest&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_deserializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> msg </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> consumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    data </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Process the message</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This decoupled architecture enables independent development, deployment, and scaling of producers and consumers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="topics-and-partitions">Topics and Partitions<a href="#topics-and-partitions" class="hash-link" aria-label="Direct link to Topics and Partitions" title="Direct link to Topics and Partitions">​</a></h2>
<p>This decoupled architecture enables independent development, deployment, and scaling of producers and consumers.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Different topics for different data domains</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;Faces&#x27;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Face detection data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;chat&#x27;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Messaging data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;media-stream&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Video and audio streaming data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Topics are physically implemented as partitions, providing the foundation for parallelism and distributed processing. While partitioning configuration is not explicitly shown in the code, the Kafka client libraries manage the distribution of messages across partitions when multiple partitions exist.</p>
<p>Messages with the same key are guaranteed to be sent to the same partition, enabling ordering guarantees for related messages.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-delivery-semantics">Message Delivery Semantics<a href="#message-delivery-semantics" class="hash-link" aria-label="Direct link to Message Delivery Semantics" title="Direct link to Message Delivery Semantics">​</a></h2>
<p>The implementation demonstrates various delivery semantics through configuration options:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Different offset reset strategies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;earliest&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Process all available messages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;latest&#x27;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Process only new messages</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Ensuring message delivery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Blocks until messages are sent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Managing consumer offsets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">enable_auto_commit</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Automatically track processed messages</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These settings control the reliability guarantees:</p>
<ul>
<li>At-most-once: When producers don&#x27;t wait for acknowledgments</li>
<li>At-least-once: When producers confirm delivery and consumers track offsets</li>
<li>Exactly-once: Requires additional configuration using transactions and idempotent producers</li>
</ul>
<p>The implementation primarily uses at-least-once semantics, ensuring messages are never lost while accepting the possibility of duplicate processing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started-1">Getting Started<a href="#getting-started-1" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<p>This section guides you through the practical steps to begin using Kafka in your application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-setup">Basic Setup<a href="#basic-setup" class="hash-link" aria-label="Direct link to Basic Setup" title="Direct link to Basic Setup">​</a></h2>
<p>Before creating producers and consumers, you need to set up a basic Kafka environment:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Import the required libraries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> kafka </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> KafkaProducer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> KafkaConsumer</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Define broker connection information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">KAFKA_BROKER </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">TOPIC_NAME </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;example-topic&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Make sure your Kafka broker is running and accessible at the specified address before proceeding to the next steps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-producer-example">Simple Producer Example<a href="#simple-producer-example" class="hash-link" aria-label="Direct link to Simple Producer Example" title="Direct link to Simple Producer Example">​</a></h2>
<p>The following example demonstrates how to create a basic producer that sends messages to a Kafka topic:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Create a Kafka producer with JSON serialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">producer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaProducer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">KAFKA_BROKER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_serializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Send a message to the topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;key&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;value&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;timestamp&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;2023-04-09T12:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">TOPIC_NAME</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Ensure the message is sent before continuing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">flush</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Message sent successfully!&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This producer serializes Python dictionaries to JSON before sending them to the Kafka topic.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-consumer-example">Simple Consumer Example<a href="#simple-consumer-example" class="hash-link" aria-label="Direct link to Simple Consumer Example" title="Direct link to Simple Consumer Example">​</a></h2>
<p>Here&#x27;s how to create a basic consumer that reads messages from a Kafka topic:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Create a Kafka consumer with JSON deserialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">consumer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaConsumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    TOPIC_NAME</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">KAFKA_BROKER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;earliest&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_deserializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Process messages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Waiting for messages...&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> message </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> consumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    data </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Received: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Process the message data here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># To exit the loop (in this example), break after processing one message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">consumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">close</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This consumer deserializes JSON messages back into Python dictionaries and processes them one by one.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<p>Kafka clients offer numerous configuration options to customize behavior:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">producer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaProducer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_serializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    acks</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;all&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">                </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Wait for all replicas to acknowledge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    retries</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">                 </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Number of retries if the broker is unavailable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    batch_size</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">16384</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">          </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Size of batches in bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    linger_ms</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">              </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Delay in milliseconds to allow batching</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    compression_type</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;gzip&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Message compression type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    max_in_flight_requests_per_connection</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># For strict ordering</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Consumer Configuration</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">consumer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> KafkaConsumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;example-topic&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    group_id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;my-group&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">          </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Consumer group ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;earliest&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Start from beginning of topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    enable_auto_commit</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Automatically commit offsets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    auto_commit_interval_ms</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">5000</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Commit interval in milliseconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    fetch_max_bytes</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">52428800</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">     </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Max bytes to fetch per request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    max_poll_records</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">500</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">         </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Max records per poll</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_deserializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These configurations allow you to fine-tune performance, reliability, and behavior of your Kafka applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-reference-1">API Reference<a href="#api-reference-1" class="hash-link" aria-label="Direct link to API Reference" title="Direct link to API Reference">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer-api">Producer API<a href="#producer-api" class="hash-link" aria-label="Direct link to Producer API" title="Direct link to Producer API">​</a></h3>
<p><strong>Module</strong>: <code>producer.py</code><br>
<strong>Functionality</strong>:</p>
<ul>
<li>Reads video frames using OpenCV.</li>
<li>Applies YOLOv3-based face detection.</li>
<li>Sends JSON results to the Kafka topic <code>Faces</code>.</li>
</ul>
<p><strong>Kafka Configuration</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">KafkaProducer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_serializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Topic: Faces
Message Format:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">{</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;frame_id&quot;: 12,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;total_faces&quot;: 3,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;faces&quot;: [</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      &quot;face_id&quot;: 0,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      &quot;bounding_box&quot;: {&quot;x&quot;: 100, &quot;y&quot;: 120, &quot;width&quot;: 50, &quot;height&quot;: 50},</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      &quot;confidence&quot;: 0.89</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-api">Consumer API<a href="#consumer-api" class="hash-link" aria-label="Direct link to Consumer API" title="Direct link to Consumer API">​</a></h3>
<p><strong>Module</strong>: <code>consumer.py</code><br>
<!-- -->Functionality:</p>
<ul>
<li>
<p>Subscribes to Kafka topic Faces.</p>
</li>
<li>
<p>Deserializes JSON messages.</p>
</li>
<li>
<p>Persists face data to PostgreSQL using insert_face_data().</p>
</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">KafkaConsumer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;Faces&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bootstrap_servers</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;localhost:9092&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    auto_offset_reset</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;earliest&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    value_deserializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>PostgreSQL Integration:</p>
<ul>
<li>Assumes insert_face_data(data) in database.py.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-usage-1">Advanced Usage<a href="#advanced-usage-1" class="hash-link" aria-label="Direct link to Advanced Usage" title="Direct link to Advanced Usage">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="serialization-and-deserialization">Serialization and Deserialization<a href="#serialization-and-deserialization" class="hash-link" aria-label="Direct link to Serialization and Deserialization" title="Direct link to Serialization and Deserialization">​</a></h3>
<ul>
<li>The <strong>Producer</strong> converts Python data (dictionary) to JSON before sending to Kafka.</li>
<li>The <strong>Consumer</strong> reads the JSON from Kafka and turns it back into a Python dictionary.</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Producer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">value_serializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Consumer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">value_deserializer</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token keyword" style="color:rgb(12, 150, 155)">lambda</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling-and-retry-mechanism">Error Handling and Retry Mechanism<a href="#error-handling-and-retry-mechanism" class="hash-link" aria-label="Direct link to Error Handling and Retry Mechanism" title="Direct link to Error Handling and Retry Mechanism">​</a></h3>
<ul>
<li>Right now, the app stops with <code>CTRL+C</code>.</li>
<li>In the future, we try to implement:<!-- -->
<ul>
<li><strong>Retry logic</strong>: Try sending or saving again if something fails.</li>
<li><strong>Logging errors</strong>: Print or save errors to understand what went wrong.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-tuning">Performance Tuning<a href="#performance-tuning" class="hash-link" aria-label="Direct link to Performance Tuning" title="Direct link to Performance Tuning">​</a></h3>
<ul>
<li>
<p>You can skip more frames by changing this line in <code>producer.py</code>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">frame_interval </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">fps </span><span class="token operator" style="color:rgb(12, 150, 155)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Try <code>/2</code> or <code>/5</code> depending on how fast you want it.</p>
</li>
<li>
<p>Use <strong>batch writes</strong> for PostgreSQL to save many face results at once.</p>
</li>
<li>
<p>Kafka has settings like <code>linger.ms</code> and <code>batch.size</code> to send data faster and smarter.</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-and-metrics">Monitoring and Metrics<a href="#monitoring-and-metrics" class="hash-link" aria-label="Direct link to Monitoring and Metrics" title="Direct link to Monitoring and Metrics">​</a></h2>
<p>Monitoring helps ensure your system is working correctly, and lets you catch problems early. Below are suggestions to monitor the health and performance of your Kafka pipeline.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-monitoring">Kafka Monitoring<a href="#kafka-monitoring" class="hash-link" aria-label="Direct link to Kafka Monitoring" title="Direct link to Kafka Monitoring">​</a></h3>
<p>Use tools like:</p>
<ul>
<li><strong>Kafka Manager</strong> or <strong>Confluent Control Center</strong> – to monitor:<!-- -->
<ul>
<li>Topic lag</li>
<li>Message throughput</li>
<li>Broker health</li>
</ul>
</li>
<li><strong>Prometheus + Grafana</strong> (with JMX Exporter) – for real-time dashboards</li>
</ul>
<p><strong>Metrics to track</strong>:</p>
<ul>
<li><code>Messages In/Out per second</code></li>
<li><code>Under-replicated partitions</code></li>
<li><code>Consumer group lag</code></li>
<li><code>Producer retries/failures</code></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer-metrics">Producer Metrics<a href="#producer-metrics" class="hash-link" aria-label="Direct link to Producer Metrics" title="Direct link to Producer Metrics">​</a></h3>
<p>If you want to log metrics from the <code>producer.py</code>, consider:</p>
<ul>
<li>Logging each frame sent and face count:<!-- -->
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot; Sent Frame </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">frame_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&#x27;total_faces&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> faces&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>Track dropped frames, retries, or exceptions using a logger.</p>
<p>For more advanced tracking:</p>
<ul>
<li>Use <strong>prometheus_client</strong> Python package to expose metrics from producer and consumer as HTTP endpoints.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-metrics">Consumer Metrics<a href="#consumer-metrics" class="hash-link" aria-label="Direct link to Consumer Metrics" title="Direct link to Consumer Metrics">​</a></h3>
<p><strong>Monitor</strong>:</p>
<ul>
<li>
<p>Number of messages consumed</p>
</li>
<li>
<p>Insert success/failure count in PostgreSQL</p>
</li>
</ul>
<p>To add basic timing:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">start_time </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> time</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">insert_face_data</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Insertion took </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">time</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation operator" style="color:rgb(12, 150, 155)">-</span><span class="token string-interpolation interpolation"> start_time</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> seconds&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql-monitoring">PostgreSQL Monitoring<a href="#postgresql-monitoring" class="hash-link" aria-label="Direct link to PostgreSQL Monitoring" title="Direct link to PostgreSQL Monitoring">​</a></h3>
<p>Used tools like pgAdmin, PostgreSQL Performance Dashboard, or command-line utilities (e.g., pg_stat_statements) to:</p>
<p>Track query execution times</p>
<p>Monitor CPU and memory usage</p>
<p>Review indexing effectiveness and query plans</p>
<h1>Deployment Guide</h1>
<p>This guide provides step-by-step instructions to deploy the Kafka-based face detection system using Docker Compose.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="production-best-practices">Production Best Practices<a href="#production-best-practices" class="hash-link" aria-label="Direct link to Production Best Practices" title="Direct link to Production Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommendations">Recommendations<a href="#recommendations" class="hash-link" aria-label="Direct link to Recommendations" title="Direct link to Recommendations">​</a></h3>
<ul>
<li>Use environment variables via <code>.env</code> for configuration.</li>
<li>Separate dev/staging/prod Docker files if needed.</li>
<li>Never commit actual secrets (e.g., passwords, keys) to version control.</li>
<li>Use logging, retry, and error handling in producer/consumer scripts.</li>
<li>Monitor Kafka, PostgreSQL, and Airflow health with dashboards or alerts.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-considerations">Scaling Considerations<a href="#scaling-considerations" class="hash-link" aria-label="Direct link to Scaling Considerations" title="Direct link to Scaling Considerations">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="techniques">Techniques<a href="#techniques" class="hash-link" aria-label="Direct link to Techniques" title="Direct link to Techniques">​</a></h3>
<ul>
<li>Use Kafka <strong>partitions</strong> to parallelize topic processing.</li>
<li>Add more <strong>consumers</strong> in a <strong>consumer group</strong> to scale reads.</li>
<li>Use multiple <strong>Airflow Celery workers</strong> for concurrent DAG execution.</li>
<li>Enable <strong>PostgreSQL partitioning or table sharding</strong> for handling large volumes of face detection data.</li>
<li>Control processing load using <code>frame_interval</code> in <code>producer.py</code>.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="containerization-with-docker">Containerization with Docker<a href="#containerization-with-docker" class="hash-link" aria-label="Direct link to Containerization with Docker" title="Direct link to Containerization with Docker">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="services-overview">Services Overview<a href="#services-overview" class="hash-link" aria-label="Direct link to Services Overview" title="Direct link to Services Overview">​</a></h3>
<table><thead><tr><th>Service</th><th>Description</th></tr></thead><tbody><tr><td><strong>Kafka</strong></td><td>Message broker in KRaft mode</td></tr><tr><td><strong>Kafka UI</strong></td><td>Web interface for Kafka monitoring</td></tr><tr><td><strong>RabbitMQ</strong></td><td>Queue broker for Celery (Airflow)</td></tr><tr><td><strong>PostgreSQL</strong></td><td>Database for Airflow metadata</td></tr><tr><td><strong>Airflow</strong></td><td>Task orchestration and scheduling platform</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-run">How to Run<a href="#how-to-run" class="hash-link" aria-label="Direct link to How to Run" title="Direct link to How to Run">​</a></h3>
<ol>
<li>Create a <code>.env</code> file (with placeholders if sharing):</li>
</ol>
<div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">POSTGRES_USER=airflow</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">POSTGRES_PASSWORD=airflow</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">RABBITMQ_DEFAULT_USER=admin</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Skip Docker Compose – services are pre-deployed on Redback</li>
</ol>
<p>All backend services are already running on the Deakin Redback server.</p>
<ol start="3">
<li>Access services:</li>
</ol>
<ul>
<li>Kafka UI: <a href="http://redback.it.deakin.edu.au:8080" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8080</a></li>
<li>Airflow: <a href="http://redback.it.deakin.edu.au:8888" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:8888</a></li>
<li>RabbitMQ: <a href="http://redback.it.deakin.edu.au:15672" target="_blank" rel="noopener noreferrer">http://redback.it.deakin.edu.au:15672</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-deployment-options">Cloud Deployment Options<a href="#cloud-deployment-options" class="hash-link" aria-label="Direct link to Cloud Deployment Options" title="Direct link to Cloud Deployment Options">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-services">Recommended Services<a href="#recommended-services" class="hash-link" aria-label="Direct link to Recommended Services" title="Direct link to Recommended Services">​</a></h3>
<table><thead><tr><th>Component</th><th>Cloud Alternative</th></tr></thead><tbody><tr><td>Kafka</td><td>Confluent Cloud, AWS MSK</td></tr><tr><td>PostgreSQL</td><td>Amazon RDS for PostgreSQL, Google Cloud SQL, Supabase</td></tr><tr><td>Container Hosting</td><td>GCP Cloud Run, AWS ECS, Azure Container Apps</td></tr><tr><td>Monitoring</td><td>Grafana Cloud, Datadog, Prometheus Stack</td></tr></tbody></table>
<blockquote>
<p>Pro Tip: Use managed cloud services to reduce infrastructure overhead.</p>
</blockquote>
<hr>
<h1>Examples</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-examples">Basic Examples<a href="#basic-examples" class="hash-link" aria-label="Direct link to Basic Examples" title="Direct link to Basic Examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-system-locally">Running the System Locally<a href="#running-the-system-locally" class="hash-link" aria-label="Direct link to Running the System Locally" title="Direct link to Running the System Locally">​</a></h3>
<p>Start the producer and consumer from the command line:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">python producer.py</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">python consumer.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sample output:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain"> Sent Frame 21: 3 faces</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Received JSON:</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;frame_id&quot;: 21,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &quot;total_faces&quot;: 3,</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="real-world-scenarios">Real World Scenarios<a href="#real-world-scenarios" class="hash-link" aria-label="Direct link to Real World Scenarios" title="Direct link to Real World Scenarios">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases-1">Use Cases<a href="#use-cases-1" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases">​</a></h3>
<ul>
<li><strong>Smart Surveillance</strong>: Detect crowd levels in public areas using CCTV.</li>
<li><strong>Retail Analytics</strong>: Monitor foot traffic and customer behavior in stores.</li>
<li><strong>Event Management</strong>: Track audience density and movement during live events.</li>
<li><strong>Campus Monitoring</strong>: Integrate with security feeds to detect unusual gatherings.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-with-other-systems">Integration with Other Systems<a href="#integration-with-other-systems" class="hash-link" aria-label="Direct link to Integration with Other Systems" title="Direct link to Integration with Other Systems">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-extend">How to Extend<a href="#how-to-extend" class="hash-link" aria-label="Direct link to How to Extend" title="Direct link to How to Extend">​</a></h3>
<ul>
<li><strong>REST APIs</strong>: Send results to analytics dashboards or visualization tools.</li>
<li><strong>Database Sync</strong>: Save face detection metadata to PostgreSQL for structured querying.</li>
<li><strong>IoT Integration</strong>: Trigger edge devices (alarms, cameras) based on crowd thresholds.</li>
<li><strong>Cloud Logging</strong>: Export structured logs to ELK stack or GCP Logging.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-processing">Batch Processing<a href="#batch-processing" class="hash-link" aria-label="Direct link to Batch Processing" title="Direct link to Batch Processing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h3>
<ul>
<li>Use Airflow DAGs to:<!-- -->
<ul>
<li>Periodically scan folders for <code>.mp4</code> files</li>
<li>Trigger face detection</li>
<li>Store results in PostgreSQL  or export as CSV</li>
</ul>
</li>
</ul>
<p>Example DAG task:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">run_producer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> BashOperator</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    task_id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;process_video&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    bash_command</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;python /opt/airflow/dags/producer.py&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stream-processing">Stream Processing<a href="#stream-processing" class="hash-link" aria-label="Direct link to Stream Processing" title="Direct link to Stream Processing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-analytics">Real-Time Analytics<a href="#real-time-analytics" class="hash-link" aria-label="Direct link to Real-Time Analytics" title="Direct link to Real-Time Analytics">​</a></h3>
<ul>
<li>Connect the producer to a <strong>live video source</strong> (RTSP camera or webcam).</li>
<li>Use Kafka to stream frames with minimal latency.</li>
<li>Consumers process in near-real-time and store results in PostgreSQL.</li>
<li>Combine with Airflow for post-processing pipelines or alerts.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contributing-guide">Contributing Guide<a href="#contributing-guide" class="hash-link" aria-label="Direct link to Contributing Guide" title="Direct link to Contributing Guide">​</a></h2>
<p>We welcome contributions to improve this Kafka-based face detection pipeline! Follow the guidelines below to ensure smooth collaboration.</p>
<hr>
<h1>Development Setup</h1>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites-1">Prerequisites<a href="#prerequisites-1" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<ul>
<li>Python 3.10+</li>
<li>Docker &amp; Docker Compose</li>
<li>Git</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-instructions-1">Setup Instructions<a href="#setup-instructions-1" class="hash-link" aria-label="Direct link to Setup Instructions" title="Direct link to Setup Instructions">​</a></h3>
<ol>
<li>Clone the repository:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git clone https://github.com/sumituiet/kafka_python/</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">cd face-detection-kafka</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Create a virtual environment:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">python -m venv venv</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">source venv/bin/activate  # or venv\Scripts\activate on Windows</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Install dependencies:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">pip install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>
<p>Create a <code>.env</code> file using <code>.env.example</code> as a reference.</p>
</li>
<li>
<p>Run services:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">docker compose up -d --build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-style-guidelines">Code Style Guidelines<a href="#code-style-guidelines" class="hash-link" aria-label="Direct link to Code Style Guidelines" title="Direct link to Code Style Guidelines">​</a></h2>
<ul>
<li>Follow <strong>PEP8</strong> for Python code.</li>
<li>Use meaningful variable names and comments.</li>
<li>Use <code>black</code> or <code>autopep8</code> for formatting:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">black .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Follow consistent naming and indentation conventions.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h2>
<ul>
<li>Unit tests should go in the <code>tests/</code> folder.</li>
<li>Use <code>pytest</code> to run tests:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">pytest tests/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Each function/module should have at least one test case.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pull-request-process">Pull Request Process<a href="#pull-request-process" class="hash-link" aria-label="Direct link to Pull Request Process" title="Direct link to Pull Request Process">​</a></h2>
<ol>
<li>Fork the repository.</li>
<li>Create a new branch:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git checkout -b feature/your-feature-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Make your changes and commit them:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git commit -m &quot;Add: brief description of change&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Push to your fork:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">git push origin feature/your-feature-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Open a Pull Request:<!-- -->
<ul>
<li>Include a <strong>clear title and description</strong></li>
<li>Mention any relevant issue numbers</li>
<li>Request review if needed</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thank-you">Thank You<a href="#thank-you" class="hash-link" aria-label="Direct link to Thank You" title="Direct link to Thank You">​</a></h2>
<p>Thanks for helping improve the project! Your contributions make it better for everyone.</p>
<h1>Troubleshooting Guide</h1>
<p>This guide helps you resolve common issues and understand how to debug problems in the Kafka-based face detection system.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-issues">Common Issues<a href="#common-issues" class="hash-link" aria-label="Direct link to Common Issues" title="Direct link to Common Issues">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-kafka-producer-not-connecting">1. Kafka Producer not connecting<a href="#1-kafka-producer-not-connecting" class="hash-link" aria-label="Direct link to 1. Kafka Producer not connecting" title="Direct link to 1. Kafka Producer not connecting">​</a></h3>
<p><strong>Symptoms</strong>: <code>NoBrokersAvailable</code> or connection timeout</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Ensure Kafka is running (<code>docker compose ps</code>)</li>
<li>Check that you&#x27;re using the correct port (usually <code>9092</code> or <code>29092</code>)</li>
<li>Ensure environment variables in <code>.env</code> are correct</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2postgresql-insertion-fails">2.PostgreSQL insertion fails<a href="#2postgresql-insertion-fails" class="hash-link" aria-label="Direct link to 2.PostgreSQL insertion fails" title="Direct link to 2.PostgreSQL insertion fails">​</a></h3>
<p><strong>Symptoms</strong>: Connection refused, timeout, or no data appears in PostgreSQL</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>
<p>Ensure PostgreSQL service is running (check with systemctl status postgresql or using Redback monitoring tools)</p>
</li>
<li>
<p>Verify that insert_face_data() (or your database utility function) connects to the correct host, port, username, password, and database name</p>
</li>
<li>
<p>Use psql CLI or pgAdmin to manually connect and verify if data is being inserted:</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">psql -h &lt;host&gt; -U &lt;user&gt; -d &lt;database&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-airflow-web-ui-is-blank-or-errors">3. Airflow web UI is blank or errors<a href="#3-airflow-web-ui-is-blank-or-errors" class="hash-link" aria-label="Direct link to 3. Airflow web UI is blank or errors" title="Direct link to 3. Airflow web UI is blank or errors">​</a></h3>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check Airflow logs using <code>docker compose logs airflow</code></li>
<li>Ensure <code>FERNET_KEY</code> is set and consistent across all services</li>
<li>Run <code>airflow db upgrade</code> and restart services</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-tips">Debugging Tips<a href="#debugging-tips" class="hash-link" aria-label="Direct link to Debugging Tips" title="Direct link to Debugging Tips">​</a></h2>
<ul>
<li>Use <code>print()</code> logs or structured logging (<code>logging</code>, <code>loguru</code>) in <code>producer.py</code> and <code>consumer.py</code></li>
<li>Enable Prometheus metrics and visualize with Grafana</li>
<li>Use <code>docker logs &lt;container&gt;</code> to inspect container output</li>
<li>Temporarily reduce <code>frame_interval</code> to speed up testing</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-can-i-run-this-without-docker">Q: Can I run this without Docker?<a href="#q-can-i-run-this-without-docker" class="hash-link" aria-label="Direct link to Q: Can I run this without Docker?" title="Direct link to Q: Can I run this without Docker?">​</a></h3>
<p><strong>A</strong>: Yes, but it&#x27;s not recommended unless necessary. Since all services (Kafka, PostgreSQL, RabbitMQ, Airflow) are already hosted on the Redback server, you only need to:</p>
<ul>
<li>Set up a local Python environment (uv venv recommended)</li>
</ul>
<p>-Ensure your scripts connect to the Redback-hosted service URLs and ports</p>
<ul>
<li>Manually install Python dependencies (e.g., kafka-python, psycopg2, requests, etc.)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-how-do-i-connect-to-kafka-ui">Q: How do I connect to Kafka UI?<a href="#q-how-do-i-connect-to-kafka-ui" class="hash-link" aria-label="Direct link to Q: How do I connect to Kafka UI?" title="Direct link to Q: How do I connect to Kafka UI?">​</a></h3>
<p><strong>A</strong>: Visit <code>http://redback.it.deakin.edu.au:8080 </code>— Kafka UI is hosted and running on the Redback server.</p>
<p>If you&#x27;re running it locally instead, the URL would be <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-what-is-the-use-of-frame_interval">Q: What is the use of <code>frame_interval</code>?<a href="#q-what-is-the-use-of-frame_interval" class="hash-link" aria-label="Direct link to q-what-is-the-use-of-frame_interval" title="Direct link to q-what-is-the-use-of-frame_interval">​</a></h3>
<p><strong>A</strong>: It controls how frequently frames are processed. Higher values = fewer frames.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-how-do-i-add-another-consumer">Q: How do I add another consumer?<a href="#q-how-do-i-add-another-consumer" class="hash-link" aria-label="Direct link to Q: How do I add another consumer?" title="Direct link to Q: How do I add another consumer?">​</a></h3>
<p><strong>A</strong>: Clone <code>consumer.py</code>, give it a unique group ID, and run it in parallel.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q-how-can-i-scale-this-in-production">Q: How can I scale this in production?<a href="#q-how-can-i-scale-this-in-production" class="hash-link" aria-label="Direct link to Q: How can I scale this in production?" title="Direct link to Q: How can I scale this in production?">​</a></h3>
<p><strong>A</strong>:</p>
<ul>
<li>
<p>Use Kafka partitions to parallelize message processing</p>
</li>
<li>
<p>Deploy microservices with Kubernetes or Cloud Run</p>
</li>
<li>
<p>Use a managed PostgreSQL service like Amazon RDS, Google Cloud SQL, or Supabase</p>
</li>
<li>
<p>Monitor performance using Prometheus, Grafana, or Datadog</p>
</li>
</ul>
<hr>
<h1>Appendix</h1>
<p>This section includes supporting materials such as definitions, external resources, and project version history.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="glossary">Glossary<a href="#glossary" class="hash-link" aria-label="Direct link to Glossary" title="Direct link to Glossary">​</a></h2>
<table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody><tr><td><strong>Kafka</strong></td><td>A distributed event streaming platform used to handle real-time data feeds.</td></tr><tr><td><strong>Producer</strong></td><td>A service or program that publishes data to Kafka topics.</td></tr><tr><td><strong>Consumer</strong></td><td>A service or program that subscribes to Kafka topics to read and process messages.</td></tr><tr><td><strong>Airflow</strong></td><td>A platform to programmatically author, schedule, and monitor workflows.</td></tr><tr><td><strong>PostgreSQL</strong></td><td>A relational SQL database used for storing face detection results.</td></tr><tr><td><strong>Docker</strong></td><td>A platform for developing and running applications inside containers.</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to Additional Resources" title="Direct link to Additional Resources">​</a></h2>
<ul>
<li><a href="https://kafka.apache.org/documentation/" target="_blank" rel="noopener noreferrer">Apache Kafka Documentation</a></li>
<li><a href="https://pjreddie.com/media/files/papers/YOLOv3.pdf" target="_blank" rel="noopener noreferrer">YOLOv3 Paper</a></li>
<li><a href="https://www.postgresql.org/docs/" target="_blank" rel="noopener noreferrer">PostgreSQL Docs</a></li>
<li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker Docs</a></li>
<li><a href="https://airflow.apache.org/docs/" target="_blank" rel="noopener noreferrer">Apache Airflow Docs</a></li>
<li><a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">Prometheus Docs</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="version-history">Version History<a href="#version-history" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h2>
<table><thead><tr><th>Version</th><th>Date</th><th>Description</th></tr></thead><tbody><tr><td>1.0</td><td>2024-04-15</td><td>Initial release with Kafka + YOLOv3 + MongoDB integration</td></tr><tr><td>1.1</td><td>2024-04-18</td><td>Docker Compose + Airflow integration</td></tr><tr><td>1.2</td><td>2024-04-22</td><td>Prometheus metrics and monitoring added</td></tr><tr><td>1.3</td><td>2024-04-25</td><td>Documentation and troubleshooting guide included</td></tr><tr><td>1.4</td><td>2025-04-22</td><td>Replaced MongoDB with PostgreSQL for result storage</td></tr><tr><td>1.5</td><td>2025-04-25</td><td>Migrated services to Deakin Redback server, removed local Docker</td></tr></tbody></table>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Redback-Operations/redback-documentation/blob/main/docs/orion-backend/kafkadocs/readme.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/redback-documentation/docs/documentation-maintenance/math-test"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">math-test</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sidebar_position-3" class="table-of-contents__link toc-highlight">sidebar_position: 3</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#core-concepts" class="table-of-contents__link toc-highlight">Core Concepts</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#api-reference" class="table-of-contents__link toc-highlight">API Reference</a></li><li><a href="#advanced-usage" class="table-of-contents__link toc-highlight">Advanced Usage</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#contributing" class="table-of-contents__link toc-highlight">Contributing</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#appendix" class="table-of-contents__link toc-highlight">Appendix</a></li><li><a href="#kafka-python-backend-for-crowd-monitoring" class="table-of-contents__link toc-highlight">Kafka Python Backend for Crowd Monitoring</a></li><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#architecture-overview" class="table-of-contents__link toc-highlight">Architecture Overview</a></li><li><a href="#technical-components" class="table-of-contents__link toc-highlight">Technical Components</a></li><li><a href="#system-requirements" class="table-of-contents__link toc-highlight">System Requirements</a></li><li><a href="#setup--deployment" class="table-of-contents__link toc-highlight">Setup &amp; Deployment</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#installation-steps" class="table-of-contents__link toc-highlight">Installation Steps</a></li><li><a href="#running-the-application" class="table-of-contents__link toc-highlight">Running the Application</a></li><li><a href="#testing-face-detection" class="table-of-contents__link toc-highlight">Testing Face Detection</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li><li><a href="#core-features" class="table-of-contents__link toc-highlight">Core Features</a><ul><li><a href="#real-time-message-processing" class="table-of-contents__link toc-highlight">Real-time Message Processing</a></li><li><a href="#fastapi-integration" class="table-of-contents__link toc-highlight">FastAPI Integration</a></li><li><a href="#kafka-powered-architecture" class="table-of-contents__link toc-highlight">Kafka-Powered Architecture</a></li></ul></li><li><a href="#additional-features" class="table-of-contents__link toc-highlight">Additional Features</a><ul><li><a href="#structured-face-detection-results" class="table-of-contents__link toc-highlight">Structured Face Detection Results</a></li><li><a href="#data-persistence" class="table-of-contents__link toc-highlight">Data Persistence</a></li><li><a href="#flexible-processing-options" class="table-of-contents__link toc-highlight">Flexible Processing Options</a></li><li><a href="#developer-friendly-implementation" class="table-of-contents__link toc-highlight">Developer-Friendly Implementation</a></li></ul></li><li><a href="#crowd-analysis" class="table-of-contents__link toc-highlight">Crowd Analysis</a><ul><li><a href="#real-time-crowd-density-monitoring" class="table-of-contents__link toc-highlight">Real-time Crowd Density Monitoring</a></li><li><a href="#facility-capacity-management" class="table-of-contents__link toc-highlight">Facility Capacity Management</a></li></ul></li><li><a href="#security-applications" class="table-of-contents__link toc-highlight">Security Applications</a><ul><li><a href="#unauthorized-access-detection" class="table-of-contents__link toc-highlight">Unauthorized Access Detection</a></li><li><a href="#anomalous-behavior-detection" class="table-of-contents__link toc-highlight">Anomalous Behavior Detection</a></li></ul></li><li><a href="#marketing-and-analytics" class="table-of-contents__link toc-highlight">Marketing and Analytics</a><ul><li><a href="#customer-traffic-analysis" class="table-of-contents__link toc-highlight">Customer Traffic Analysis</a></li><li><a href="#engagement-measurement" class="table-of-contents__link toc-highlight">Engagement Measurement</a></li></ul></li><li><a href="#event-management" class="table-of-contents__link toc-highlight">Event Management</a><ul><li><a href="#queue-management" class="table-of-contents__link toc-highlight">Queue Management</a></li><li><a href="#event-attendance-tracking" class="table-of-contents__link toc-highlight">Event Attendance Tracking</a></li></ul></li><li><a href="#health-and-safety" class="table-of-contents__link toc-highlight">Health and Safety</a><ul><li><a href="#social-distancing-compliance" class="table-of-contents__link toc-highlight">Social Distancing Compliance</a></li><li><a href="#emergency-evacuation-management" class="table-of-contents__link toc-highlight">Emergency Evacuation Management</a></li></ul></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a><ul><li><a href="#system-requirements-1" class="table-of-contents__link toc-highlight">System Requirements</a></li><li><a href="#software-prerequisites" class="table-of-contents__link toc-highlight">Software Prerequisites</a></li><li><a href="#network-requirements" class="table-of-contents__link toc-highlight">Network Requirements</a></li></ul></li><li><a href="#setup-instructions" class="table-of-contents__link toc-highlight">Setup Instructions</a><ul><li><a href="#1-clone-the-repository" class="table-of-contents__link toc-highlight">1. Clone the Repository</a></li><li><a href="#2-access-hosted-services-redback" class="table-of-contents__link toc-highlight">2. <strong>Access hosted services (Redback)</strong></a></li><li><a href="#3-setup-python-environment" class="table-of-contents__link toc-highlight">3. Setup Python Environment</a></li></ul></li><li><a href="#environment-configuration" class="table-of-contents__link toc-highlight">Environment Configuration</a><ul><li><a href="#1-configure-kafka-connection" class="table-of-contents__link toc-highlight">1. Configure Kafka Connection</a></li><li><a href="#2-configure-topic-names" class="table-of-contents__link toc-highlight">2. Configure Topic Names</a></li></ul></li><li><a href="#docker-issues" class="table-of-contents__link toc-highlight">Docker Issues</a></li><li><a href="#python-environment-issues" class="table-of-contents__link toc-highlight">Python Environment Issues</a></li><li><a href="#connectivity-issues" class="table-of-contents__link toc-highlight">Connectivity Issues</a></li><li><a href="#kafka-architecture-overview" class="table-of-contents__link toc-highlight">Kafka Architecture Overview</a><ul><li><a href="#producer-consumer-model" class="table-of-contents__link toc-highlight">Producer-Consumer Model</a></li></ul></li><li><a href="#topics-and-partitions" class="table-of-contents__link toc-highlight">Topics and Partitions</a></li><li><a href="#message-delivery-semantics" class="table-of-contents__link toc-highlight">Message Delivery Semantics</a></li><li><a href="#getting-started-1" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#basic-setup" class="table-of-contents__link toc-highlight">Basic Setup</a></li><li><a href="#simple-producer-example" class="table-of-contents__link toc-highlight">Simple Producer Example</a></li><li><a href="#simple-consumer-example" class="table-of-contents__link toc-highlight">Simple Consumer Example</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a></li><li><a href="#api-reference-1" class="table-of-contents__link toc-highlight">API Reference</a><ul><li><a href="#producer-api" class="table-of-contents__link toc-highlight">Producer API</a></li><li><a href="#consumer-api" class="table-of-contents__link toc-highlight">Consumer API</a></li></ul></li><li><a href="#advanced-usage-1" class="table-of-contents__link toc-highlight">Advanced Usage</a><ul><li><a href="#serialization-and-deserialization" class="table-of-contents__link toc-highlight">Serialization and Deserialization</a></li><li><a href="#error-handling-and-retry-mechanism" class="table-of-contents__link toc-highlight">Error Handling and Retry Mechanism</a></li><li><a href="#performance-tuning" class="table-of-contents__link toc-highlight">Performance Tuning</a></li></ul></li><li><a href="#monitoring-and-metrics" class="table-of-contents__link toc-highlight">Monitoring and Metrics</a><ul><li><a href="#kafka-monitoring" class="table-of-contents__link toc-highlight">Kafka Monitoring</a></li><li><a href="#producer-metrics" class="table-of-contents__link toc-highlight">Producer Metrics</a></li><li><a href="#consumer-metrics" class="table-of-contents__link toc-highlight">Consumer Metrics</a></li><li><a href="#postgresql-monitoring" class="table-of-contents__link toc-highlight">PostgreSQL Monitoring</a></li></ul></li><li><a href="#production-best-practices" class="table-of-contents__link toc-highlight">Production Best Practices</a><ul><li><a href="#recommendations" class="table-of-contents__link toc-highlight">Recommendations</a></li><li><a href="#scaling-considerations" class="table-of-contents__link toc-highlight">Scaling Considerations</a></li><li><a href="#techniques" class="table-of-contents__link toc-highlight">Techniques</a></li></ul></li><li><a href="#containerization-with-docker" class="table-of-contents__link toc-highlight">Containerization with Docker</a><ul><li><a href="#services-overview" class="table-of-contents__link toc-highlight">Services Overview</a></li><li><a href="#how-to-run" class="table-of-contents__link toc-highlight">How to Run</a></li></ul></li><li><a href="#cloud-deployment-options" class="table-of-contents__link toc-highlight">Cloud Deployment Options</a><ul><li><a href="#recommended-services" class="table-of-contents__link toc-highlight">Recommended Services</a></li></ul></li><li><a href="#basic-examples" class="table-of-contents__link toc-highlight">Basic Examples</a><ul><li><a href="#running-the-system-locally" class="table-of-contents__link toc-highlight">Running the System Locally</a></li></ul></li><li><a href="#real-world-scenarios" class="table-of-contents__link toc-highlight">Real World Scenarios</a><ul><li><a href="#use-cases-1" class="table-of-contents__link toc-highlight">Use Cases</a></li></ul></li><li><a href="#integration-with-other-systems" class="table-of-contents__link toc-highlight">Integration with Other Systems</a><ul><li><a href="#how-to-extend" class="table-of-contents__link toc-highlight">How to Extend</a></li></ul></li><li><a href="#batch-processing" class="table-of-contents__link toc-highlight">Batch Processing</a><ul><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li></ul></li><li><a href="#stream-processing" class="table-of-contents__link toc-highlight">Stream Processing</a><ul><li><a href="#real-time-analytics" class="table-of-contents__link toc-highlight">Real-Time Analytics</a></li></ul></li><li><a href="#contributing-guide" class="table-of-contents__link toc-highlight">Contributing Guide</a><ul><li><a href="#prerequisites-1" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#setup-instructions-1" class="table-of-contents__link toc-highlight">Setup Instructions</a></li></ul></li><li><a href="#code-style-guidelines" class="table-of-contents__link toc-highlight">Code Style Guidelines</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#pull-request-process" class="table-of-contents__link toc-highlight">Pull Request Process</a></li><li><a href="#thank-you" class="table-of-contents__link toc-highlight">Thank You</a></li><li><a href="#common-issues" class="table-of-contents__link toc-highlight">Common Issues</a><ul><li><a href="#1-kafka-producer-not-connecting" class="table-of-contents__link toc-highlight">1. Kafka Producer not connecting</a></li><li><a href="#2postgresql-insertion-fails" class="table-of-contents__link toc-highlight">2.PostgreSQL insertion fails</a></li><li><a href="#3-airflow-web-ui-is-blank-or-errors" class="table-of-contents__link toc-highlight">3. Airflow web UI is blank or errors</a></li></ul></li><li><a href="#debugging-tips" class="table-of-contents__link toc-highlight">Debugging Tips</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#q-can-i-run-this-without-docker" class="table-of-contents__link toc-highlight">Q: Can I run this without Docker?</a></li><li><a href="#q-how-do-i-connect-to-kafka-ui" class="table-of-contents__link toc-highlight">Q: How do I connect to Kafka UI?</a></li><li><a href="#q-what-is-the-use-of-frame_interval" class="table-of-contents__link toc-highlight">Q: What is the use of <code>frame_interval</code>?</a></li><li><a href="#q-how-do-i-add-another-consumer" class="table-of-contents__link toc-highlight">Q: How do I add another consumer?</a></li><li><a href="#q-how-can-i-scale-this-in-production" class="table-of-contents__link toc-highlight">Q: How can I scale this in production?</a></li></ul></li><li><a href="#glossary" class="table-of-contents__link toc-highlight">Glossary</a></li><li><a href="#additional-resources" class="table-of-contents__link toc-highlight">Additional Resources</a></li><li><a href="#version-history" class="table-of-contents__link toc-highlight">Version History</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Info</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/redback-documentation/docs/category/onboarding">Docs</a></li><li class="footer__item"><a href="https://github.com/Redback-Operations" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Redback Operations</div></div></div></footer></div>
</body>
</html>